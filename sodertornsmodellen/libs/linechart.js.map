{"version":3,"sources":["webpack:///webpack/bootstrap d6e66634006a274313d8","webpack:///./src/index.js","webpack:///./src/component.js","webpack:///./src/styles.scss?ccec","webpack:///./src/template.html"],"names":["VERSION_INFO","version","build","LineChart","Vizabi","Tool","extend","init","placeholder","external_model","name","components","component","model","Component","get","ui","show_value_when_drag_play","axis_aligned","_super","default_model","entities_tags","marker_tags","space","label","use","hook_parent","scales","locale","datawarning","doubtDomain","doubtRange","versionInfo","utils","helpers","axisSmart","collisionResolver","iconset","iconWarn","warn","iconQuestion","question","LCComponent","config","context","_this","template","require","model_expects","type","model_binds","_readyOnce","marker","getFrame","time","value","frame","_frameIsValid","frameChanged","playing","isTouchDevice","tooltip","classed","all_values","values","updateIndicators","updateShow","zoomToMaxMin","updateSize","redrawDataPoints","highlightLines","evt","path","indexOf","yScale","xScale","startOrigin","formatDate","axis_x","getZoomedMin","endOrigin","getZoomedMax","set","updateTime","updateDoubtOpacity","updateColors","rangeXRatio","rangeXShift","rangeYRatio","rangeYShift","lineWidthScale","d3","scaleLinear","domain","range","clamp","xAxis","yAxis","COLOR_BLACKISH","COLOR_WHITEISH","COLOR_WHITEISH_SHADE","isDataPreprocessed","timeUpdatedOnce","sizeUpdatedOnce","getNearestKey","memoize","readyOnce","element","select","graph","yAxisElContainer","yAxisEl","xAxisElContainer","xAxisEl","xTitleEl","yTitleEl","yInfoEl","linesContainerCrop","linesContainer","labelsContainerCrop","labelsContainer","dataWarningEl","verticalNow","projectionX","projectionY","entityLabels","selectAll","entityLines","totalLength_1","TIMEDIM","getDimension","KEYS","unique","_getAllDimensions","exceptType","KEY","join","dataKeys","getDataKeysPerHook","labelNames","getLabelHookNames","selector","filter","d","valueX","hidden","conceptPropsY","axis_y","getConceptprops","setIcon","attr","style","Number","Boolean","description","sourceLink","on","parent","findChildByName","pin","rect","getBBox","coord","makeAbsoluteContext","farthestViewportElement","x","y","height","setHook","show","setPos","hide","wScale","highlight","length","selectMarker","ready","all_steps","getAllSteps","updateUIStrings","remove","allValues","entityMousemove","bind","entityMouseout","Object","keys","color","conceptPropsX","conceptPropsC","translator","getTFunction","strings","title","Y","X","C","unit","which","append","text","toggle","xTitle","data","enter","merge","yTitle","markerID","alignX","alignY","updateView","opacity","getUTCFullYear","toString","someSelected","getScale","splash","limits","getLimits","min","max","cScale","tickFormat","getTickFormatter","scale","cached","dataHash","getKeys","map","entity","getKey","lineWidth","shadowWidth","each","index","highlightMarker","clearHighlighted","labelGroup","getColorsByValue","colorShadow","_getLabelText","substring","valueHideLimit","chart","labels","min_number_of_entities_when_values_hide","line","curve","curveMonotoneX","colorValue","getColorShade","colorID","shadeID","valuesColor","time_1","duration","delayAnimations","timeDim","prev_steps","f","profiles","margin","top","right","left","bottom","infoElHeight","yAxisTitleBottomMargin","tick_spacing","text_padding","lollipopRadius","limitMaxTickNumberX","presentationProfileChanges","xAxisTitleBottomMargin","hideSTitle","timeSliderProfiles","small","medium","large","isRTL","padding","activeProfile","getActiveProfile","longestLabelWidth","width","getComputedTextLength","magicMargin","Math","parseInt","tickSizeInner","tickSizeOuter","tickPadding","tickSizeMinor","labelerOptions","scaleType","toolMargin","limitMaxTickNumber","viewportLength","formatter","bump","call","yTitleText","node","titleBBox","t","transform","translateX","translateY","warnBB","xTitleText","highlightValue","hoveringNow","opts","rangeMax","mRight","profile","getLayoutProfile","trigger","xy","i","push","valueY","path2","getTotalLength","path1","totalLength","interrupt","transition","delay","ease","easeLinear","start","hideXAxisValue","highlightTransDuration","timerFlush","clearTimeout","collisionTimeout","setTimeout","me","closestToMouse","mouse","resolvedTime","invert","resolvedValue","mousePos","isDate","parse","nearestKey","isHighlighted","isNaN","scaledTime","scaledValue","whenHovering","showTooltip","hideVerticalNow","showProjectionLineX","showProjectionLineY","higlightValueX","higlightValueY","unhoverTimeout","event","relatedTarget","OPACITY_HIGHLT","OPACITY_HIGHLT_DIM","OPACITY_SELECT","OPACITY_REGULAR","opacityRegular","OPACITY_SELECT_DIM","opacitySelectDim","someHighlighted","nonSelectedOpacityZero","selected","getSelected","sortValue","sort","ascending","scaleGenericlog","val","obj","fn","keyObj","resKey","key","abs"],"mappings":"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","file":"linechart.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6e66634006a274313d8","import \"./styles.scss\";\nimport component from \"./component\";\n\nconst VERSION_INFO = { version: __VERSION, build: __BUILD };\n\n// LINE CHART TOOL\nconst LineChart = Vizabi.Tool.extend(\"LineChart\", {\n  /**\n   * Initialized the tool\n   * @param {Object} placeholder Placeholder element for the tool\n   * @param {Object} external_model Model as given by the external page\n   */\n  init(placeholder, external_model) {\n\n    this.name = \"linechart\";\n\n    this.components = [{\n      component,\n      placeholder: \".vzb-tool-viz\",\n      model: [\"state.time\", \"state.marker\", \"locale\", \"ui\"] //pass models to component\n    }, {\n      component: Vizabi.Component.get(\"timeslider\"),\n      placeholder: \".vzb-tool-timeslider\",\n      model: [\"state.time\", \"state.marker\", \"ui\"],\n      ui: { show_value_when_drag_play: true, axis_aligned: false }\n    }, {\n      component: Vizabi.Component.get(\"dialogs\"),\n      placeholder: \".vzb-tool-dialogs\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"buttonlist\"),\n      placeholder: \".vzb-tool-buttonlist\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"treemenu\"),\n      placeholder: \".vzb-tool-treemenu\",\n      model: [\"state.marker\", \"state.marker_tags\", \"state.time\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datawarning\"),\n      placeholder: \".vzb-tool-datawarning\",\n      model: [\"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datanotes\"),\n      placeholder: \".vzb-tool-datanotes\",\n      model: [\"state.marker\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"steppedspeedslider\"),\n      placeholder: \".vzb-tool-stepped-speed-slider\",\n      model: [\"state.time\", \"locale\"]\n    }];\n\n    this._super(placeholder, external_model);\n  },\n\n  default_model: {\n    \"state\": {\n      \"time\": {\n        \"autoconfig\": {\n          \"type\": \"time\"\n        }\n      },\n      \"entities\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"entities_colorlegend\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      entities_tags: {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"includeOnlyIDs\": [\"tag\"]\n        }\n      },\n      marker_tags: {\n        space: [\"entities_tags\"],\n        label: {\n          use: \"property\",\n        },\n        hook_parent: {}\n      },\n      \"entities_allpossible\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"marker_allpossible\": {\n        \"space\": [\"entities_allpossible\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        }\n      },\n      \"marker\": {\n        \"space\": [\"entities\", \"time\"],\n        \"axis_x\": {\n          \"use\": \"indicator\",\n          \"allow\": { scales: [\"time\"] },\n          \"autoconfig\": {\n            \"index\": 0,\n            \"type\": \"time\"\n          }\n        },\n        \"axis_y\": {\n          \"use\": \"indicator\",\n          \"allow\": { scales: [\"linear\", \"log\"] },\n          \"autoconfig\": {\n            \"type\": \"measure\"\n          }\n        },\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        },\n        \"color\": {\n          \"syncModels\": [\"marker_colorlegend\"],\n          \"autoconfig\": {}\n        }\n      },\n      \"marker_colorlegend\": {\n        \"space\": [\"entities_colorlegend\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"which\": \"name\"\n        },\n        \"hook_rank\": {\n          \"use\": \"property\",\n          \"which\": \"rank\"\n        },\n        \"hook_geoshape\": {\n          \"use\": \"property\",\n          \"which\": \"shape_lores_svg\"\n        }\n      }\n    },\n    locale: { },\n    \"ui\": {\n      \"chart\": {\n        \"labels\": {\n          \"min_number_of_entities_when_values_hide\": 2 //values hide when showing 2 entities or more\n        },\n        \"whenHovering\": {\n          \"hideVerticalNow\": false,\n          \"showProjectionLineX\": true,\n          \"showProjectionLineY\": true,\n          \"higlightValueX\": true,\n          \"higlightValueY\": true,\n          \"showTooltip\": false\n        }\n      },\n      datawarning: {\n        doubtDomain: [],\n        doubtRange: []\n      },\n      \"buttons\": [\"colors\", \"find\", \"show\", \"moreoptions\", \"fullscreen\", \"presentation\"],\n      \"dialogs\": {\n        \"popup\": [\"colors\", \"find\", \"show\", \"moreoptions\"],\n        \"sidebar\": [\"colors\", \"show\"],\n        \"moreoptions\": [\"opacity\", \"speed\", \"axes\", \"colors\", \"presentation\", \"about\"]\n      },\n      \"presentation\": false\n    }\n  },\n\n  versionInfo: VERSION_INFO\n});\n\nexport default LineChart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const {\n  utils,\n  Component,\n  helpers: {\n    \"d3.axisWithLabelPicker\": axisSmart,\n    \"d3.collisionResolver\": collisionResolver \n  },\n  iconset: {\n    warn: iconWarn,\n    question: iconQuestion\n  }\n} = Vizabi;\n\n// LINE CHART COMPONENT\nconst LCComponent = Component.extend(\"linechart\", {\n\n  init(config, context) {\n    const _this = this;\n    this.name = \"linechart\";\n    this.template = require(\"./template.html\");\n\n    //define expected models for this component\n    this.model_expects = [{\n      name: \"time\",\n      type: \"time\"\n    }, {\n      name: \"marker\",\n      type: \"marker\"\n    }, {\n      name: \"locale\",\n      type: \"locale\"\n    }, {\n      name: \"ui\",\n      type: \"ui\"\n    }];\n\n\n    this.model_binds = {\n      \"change:time.value\": function() {\n        if (!_this._readyOnce) return;\n        _this.model.marker.getFrame(_this.model.time.value, (frame, time) => {\n          if (!_this._frameIsValid(frame)) return utils.warn(\"change:time.value: empty data received from marker.getFrame(). doing nothing\");\n          _this.frameChanged(frame, time);\n        });\n      },\n      \"change:time.playing\": function() {\n        // hide tooltip on touch devices when playing\n        if (_this.model.time.playing && utils.isTouchDevice() && !_this.tooltip.classed(\"vzb-hidden\")) _this.tooltip.classed(\"vzb-hidden\", true);\n      },\n      \"change:time.start\": function() {\n        if (!_this._readyOnce || !_this.all_values || !_this.values) return;\n        _this.updateIndicators();\n        _this.updateShow();\n        _this.zoomToMaxMin();\n        _this.updateSize();\n        _this.redrawDataPoints();\n        _this.highlightLines();        \n      },\n      \"change:time.end\": function() {\n        if (!_this._readyOnce || !_this.all_values || !_this.values) return;\n        _this.updateIndicators();\n        _this.updateShow();\n        _this.zoomToMaxMin();\n        _this.updateSize();\n        _this.redrawDataPoints();\n        _this.highlightLines();        \n      },\n      \"change:marker\": function(evt, path) {\n        if (!_this._readyOnce) return;\n        if (path.indexOf(\"domainMin\") > -1 || path.indexOf(\"domainMax\") > -1 ||\n          path.indexOf(\"zoomedMin\") > -1 || path.indexOf(\"zoomedMax\") > -1) {\n          if (!_this.yScale || !_this.xScale) return; //abort if building of the scale is in progress\n          if (path.indexOf(\"axis_x\") > -1) {\n            const startOrigin = _this.model.time.formatDate(_this.model.marker.axis_x.getZoomedMin());\n            const endOrigin = _this.model.time.formatDate(_this.model.marker.axis_x.getZoomedMax());\n            _this.model.time.set({\n              startOrigin: startOrigin,\n              endOrigin: endOrigin\n            });\n            return;      \n          }\n          if (!_this.all_values || !_this.values) return;\n          _this.updateIndicators();\n          _this.updateShow();\n          _this.zoomToMaxMin();\n          _this.updateSize();\n          _this.updateTime();\n          _this.redrawDataPoints();\n          _this.highlightLines();          \n          return;\n        }\n        if (path.indexOf(\"scaleType\") > -1) {\n          if (!_this.all_values || !_this.values) return;\n          _this.updateIndicators();\n          _this.updateShow();\n          _this.zoomToMaxMin();\n          _this.updateSize();\n          _this.redrawDataPoints();\n          _this.highlightLines();          \n        }\n      },\n      \"change:marker.highlight\": function() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.select\": function() {\n        if (!_this._readyOnce) return;\n        _this.updateDoubtOpacity();\n        _this.highlightLines();\n      },\n      \"change:marker.opacitySelectDim\": function() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.opacityRegular\": function() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.color.palette\": function() {\n        if (!_this._readyOnce) return;\n        _this.updateColors();\n      }\n    };\n\n    this._super(config, context);\n\n    this.xScale = null;\n    this.yScale = null;\n\n    this.rangeXRatio = 1;\n    this.rangeXShift = 0;\n\n    this.rangeYRatio = 1;\n    this.rangeYShift = 0;\n    this.lineWidthScale = d3.scaleLinear().domain([0, 20]).range([7, 1]).clamp(true);\n    this.xAxis = axisSmart(\"bottom\");\n    this.yAxis = axisSmart(\"left\");\n\n    this.COLOR_BLACKISH = \"#333\";\n    this.COLOR_WHITEISH = \"#fdfdfd\";\n    this.COLOR_WHITEISH_SHADE = \"#555\";\n\n    this.isDataPreprocessed = false;\n    this.timeUpdatedOnce = false;\n    this.sizeUpdatedOnce = false;\n\n    this.getNearestKey = utils.memoize(this.getNearestKey);\n  },\n\n  /*\n   * domReady:\n   * Executed after template is loaded\n   * Ideally, it contains instantiations related to template\n   */\n  readyOnce() {\n    const _this = this;\n\n    this.element = d3.select(this.element);\n    this.graph = this.element.select(\".vzb-lc-graph\");\n\n    this.yAxisElContainer = this.graph.select(\".vzb-lc-axis-y\");\n    this.yAxisEl = this.yAxisElContainer.select(\"g\");\n\n    this.xAxisElContainer = this.graph.select(\".vzb-lc-axis-x\");\n    this.xAxisEl = this.xAxisElContainer.select(\"g\");\n\n    this.xTitleEl = this.graph.select(\".vzb-lc-axis-x-title\");\n    this.yTitleEl = this.graph.select(\".vzb-lc-axis-y-title\");\n    this.yInfoEl = this.graph.select(\".vzb-lc-axis-y-info\");\n    this.linesContainerCrop = this.graph.select(\".vzb-lc-lines-crop\");\n    this.linesContainer = this.graph.select(\".vzb-lc-lines\");\n    this.labelsContainerCrop = this.graph.select(\".vzb-lc-labels-crop\");\n    this.labelsContainer = this.graph.select(\".vzb-lc-labels\");\n\n    this.dataWarningEl = this.graph.select(\".vzb-data-warning\");\n\n    this.verticalNow = this.labelsContainer.select(\".vzb-lc-vertical-now\");\n    this.tooltip = this.element.select(\".vzb-tooltip\");\n    //            this.filterDropshadowEl = this.element.select('#vzb-lc-filter-dropshadow');\n    this.projectionX = this.graph.select(\".vzb-lc-projection-x\");\n    this.projectionY = this.graph.select(\".vzb-lc-projection-y\");\n\n    this.entityLabels = this.labelsContainer.selectAll(\".vzb-lc-entity\");\n    this.entityLines = this.linesContainer.selectAll(\".vzb-lc-entity\");\n    this.totalLength_1 = {};\n\n    this.TIMEDIM = this.model.time.getDimension();\n    this.KEYS = utils.unique(this.model.marker._getAllDimensions({ exceptType: \"time\" }));\n    this.KEY = this.KEYS.join(\",\");\n    this.dataKeys = this.model.marker.getDataKeysPerHook();\n    this.labelNames = this.model.marker.getLabelHookNames();\n\n    this.collisionResolver = collisionResolver()\n      .selector(\".vzb-lc-label\")\n      .value(\"valueY\")\n      .filter(function(d, time){\n        return (d.valueX - time === 0 && !d.hidden)\n      });\n    \n    //component events\n\n    const conceptPropsY = this.model.marker.axis_y.getConceptprops();\n    utils.setIcon(this.yInfoEl, iconQuestion)\n      .select(\"svg\").attr(\"width\", \"0px\").attr(\"height\", \"0px\")\n      .style('opacity', Number(Boolean(conceptPropsY.description || conceptPropsY.sourceLink)));\n\n    this.yInfoEl.on(\"click\", () => {\n      _this.parent.findChildByName(\"gapminder-datanotes\").pin();\n    });\n    this.yInfoEl.on(\"mouseover\", function() {\n      const rect = this.getBBox();\n      const coord = utils.makeAbsoluteContext(this, this.farthestViewportElement)(rect.x - 10, rect.y + rect.height + 10);\n      _this.parent.findChildByName(\"gapminder-datanotes\").setHook(\"axis_y\").show().setPos(coord.x, coord.y);\n    });\n    this.yInfoEl.on(\"mouseout\", () => {\n      _this.parent.findChildByName(\"gapminder-datanotes\").hide();\n    });\n\n    this.wScale = d3.scaleLinear()\n      .domain(this.model.ui.datawarning.doubtDomain)\n      .range(this.model.ui.datawarning.doubtRange);\n\n    this.on(\"resize\", () => {\n      //return if updatesize exists with error\n      if (_this.updateSize()) return;\n      _this.updateTime();\n      _this.redrawDataPoints();\n    });\n    this.graph.on(\"click\", () => {\n      if (this.model.marker.highlight.length == 1) {\n        _this.model.marker.selectMarker(this.model.marker.highlight[0]);\n      }\n    });\n  },\n\n  ready() {\n    const _this = this;\n    this.KEYS = utils.unique(this.model.marker._getAllDimensions({ exceptType: \"time\" }));\n    this.KEY = this.KEYS.join(\",\");\n    this.dataKeys = this.model.marker.getDataKeysPerHook();\n    this.labelNames = this.model.marker.getLabelHookNames();\n\n    this.all_steps = this.model.time.getAllSteps();\n    this.all_values = this.values = null;\n    this.updateTime();\n    this.updateUIStrings();\n    this.updateIndicators();\n      //this.updateShow();\n    this.entityLines.remove();\n    this.entityLabels.remove();\n    //null means we need to calculate all frames before we get to the callback\n    this.model.marker.getFrame(null, allValues => {\n      _this.all_values = allValues;\n      _this.model.marker.getFrame(_this.model.time.value, values => {\n        if (!_this._frameIsValid(values)) return;\n        _this.values = values;\n        _this.updateShow();\n        if(_this.updateSize()) return;\n        _this.updateDoubtOpacity();\n        _this.zoomToMaxMin();\n        _this.redrawDataPoints();\n        _this.highlightLines();\n        _this.linesContainerCrop\n          .on(\"mousemove\", _this.entityMousemove.bind(_this, null, null, _this))\n          .on(\"mouseleave\", _this.entityMouseout.bind(_this, null, null, _this));\n\n      });\n    });\n  },\n\n  _frameIsValid(frame) {\n    return !(!frame\n    || Object.keys(frame.axis_y).length === 0\n    || Object.keys(frame.axis_x).length === 0\n    || Object.keys(frame.color).length === 0);\n  },\n\n  frameChanged(frame, time) {\n//    if (time.toString() != this.model.time.value.toString()) return; // frame is outdated\n    this.frame = frame;\n    this.updateTime();\n    if (!this.all_values) return;\n    this.redrawDataPoints();\n  },\n\n  updateUIStrings() {\n    const _this = this;\n    const conceptPropsY = _this.model.marker.axis_y.getConceptprops();\n    const conceptPropsX = _this.model.marker.axis_x.getConceptprops();\n    const conceptPropsC = _this.model.marker.color.getConceptprops();\n    this.translator = this.model.locale.getTFunction();\n\n    this.strings = {\n      title: {\n        Y: conceptPropsY.name,\n        X: conceptPropsX.name,\n        C: conceptPropsC.name\n      },\n      unit: {\n        Y: conceptPropsY.unit || \"\",\n        X: conceptPropsX.unit || \"\",\n        C: conceptPropsC.unit || \"\"\n      }\n    };\n\n    if (this.strings.unit.Y === \"unit/\" + this.model.marker.axis_y.which) this.strings.unit.Y = \"\";\n    if (this.strings.unit.X === \"unit/\" + this.model.marker.axis_x.which) this.strings.unit.X = \"\";\n    if (this.strings.unit.C === \"unit/\" + this.model.marker.color.which) this.strings.unit.C = \"\";\n\n    if (this.strings.unit.Y) this.strings.unit.Y = \", \" + this.strings.unit.Y;\n    if (this.strings.unit.X) this.strings.unit.X = \", \" + this.strings.unit.X;\n    if (this.strings.unit.C) this.strings.unit.C = \", \" + this.strings.unit.C;\n\n    utils.setIcon(this.dataWarningEl, iconWarn).select(\"svg\").attr(\"width\", \"0px\").attr(\"height\", \"0px\");\n    this.dataWarningEl.append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .text(this.translator(\"hints/dataWarning\"));\n\n    this.dataWarningEl\n      .on(\"click\", () => {\n        _this.parent.findChildByName(\"gapminder-datawarning\").toggle();\n      })\n      .on(\"mouseover\", () => {\n        _this.updateDoubtOpacity(1);\n      })\n      .on(\"mouseout\", () => {\n        _this.updateDoubtOpacity();\n      });\n\n    let xTitle = this.xTitleEl.selectAll(\"text\").data([0]);\n    xTitle = xTitle.enter().append(\"text\").merge(xTitle);\n\n    let yTitle = this.yTitleEl.selectAll(\"text\").data([0]);\n    yTitle = yTitle.enter().append(\"text\").merge(yTitle);\n    yTitle\n      .on(\"click\", () => {\n        _this.parent\n          .findChildByName(\"gapminder-treemenu\")\n          .markerID(\"axis_y\")\n          .alignX(\"left\")\n          .alignY(\"top\")\n          .updateView()\n          .toggle();\n      });\n\n  },\n\n  updateDoubtOpacity(opacity) {\n    if (opacity == null) opacity = this.wScale(+this.time.getUTCFullYear().toString());\n    if (this.someSelected) opacity = 1;\n    this.dataWarningEl.style(\"opacity\", opacity);\n  },\n\n  /*\n   * UPDATE INDICATORS\n   */\n  updateIndicators() {\n    const _this = this;\n    const KEY = this.KEY;\n\n    //scales\n    this.yScale = this.model.marker.axis_y.getScale();\n    if (!this.splash) {\n      const limits = this.model.marker.axis_y.getLimits(this.model.marker.axis_y.which);\n      this.yScale.domain([limits.min, limits.max]);\n    }\n    this.xScale = this.model.marker.axis_x.getScale();\n    this.cScale = this.model.marker.color.getScale();\n    this.yAxis.tickFormat(this.model.marker.axis_y.getTickFormatter());\n    this.xAxis.tickFormat(this.model.marker.axis_x.getTickFormatter());\n\n    this.collisionResolver.scale(this.yScale)\n      .KEY(KEY);  \n  },\n\n  /*\n   * UPDATE SHOW:\n   * Ideally should only update when show parameters change or data changes\n   */\n  updateShow() {\n    const _this = this;\n    const KEYS = this.KEYS;\n    const KEY = this.KEY;\n    const dataKeys = this.dataKeys;\n\n    this.cached = {};\n\n    this.dataHash = {};\n    this.data = this.model.marker.getKeys().map(entity => {\n      entity[KEY] = utils.getKey(entity, KEYS);\n      this.dataHash[entity[KEY]] = entity;\n      return entity;\n    });\n    this.linesContainer.selectAll(\".vzb-lc-entity\").remove();\n    this.entityLines = this.linesContainer.selectAll(\".vzb-lc-entity\").data(this.data);\n\n    this.lineWidth = this.lineWidthScale(this.data.length);\n    if (this.lineWidth >= 2) {\n      this.shadowWidth = this.lineWidth * 1.3;\n    } else {\n      this.shadowWidth = null;\n    }\n    this.labelsContainer.classed(\"small\", !this.shadowWidth);\n    this.entityLines = this.entityLines.enter().append(\"g\")\n      .attr(\"class\", d => \"vzb-lc-entity vzb-lc-entity-\" + d[KEY])\n      .each(function(d, index) {\n        const entity = d3.select(this);\n        if (_this.shadowWidth) {\n          entity.append(\"path\")\n            .attr(\"class\", \"vzb-lc-line-shadow\");\n        } else {\n          \n        }\n\n        entity.append(\"path\")\n          .attr(\"class\", \"vzb-lc-line\");\n\n      })\n      .merge(this.entityLines);\n    this.labelsContainer.selectAll(\".vzb-lc-entity\").remove();\n    this.entityLabels = this.labelsContainer.selectAll(\".vzb-lc-entity\").data(this.data);\n    this.entityLabels = this.entityLabels.enter().append(\"g\")\n      .attr(\"class\", \"vzb-lc-entity\")\n      .on(\"mouseover\", d => {\n        _this.model.marker.highlightMarker(d);\n      })\n      .on(\"mouseout\", d => {\n        _this.model.marker.clearHighlighted();\n      })\n      .each(function(d, index) {\n        const entity = d3.select(this);\n\n        entity.append(\"circle\")\n          .attr(\"class\", \"vzb-lc-circle\")\n          .attr(\"cx\", 0);\n\n        const labelGroup = entity.append(\"g\").attr(\"class\", \"vzb-lc-label\");\n\n        labelGroup.append(\"text\")\n          .attr(\"class\", \"vzb-lc-labelname vzb-lc-labelstroke\")\n          .attr(\"dy\", \".35em\");\n\n        labelGroup.append(\"text\")\n          .attr(\"class\", \"vzb-lc-labelname vzb-lc-labelfill\")\n          .attr(\"dy\", \".35em\");\n\n        labelGroup.append(\"text\")\n          .attr(\"class\", \"vzb-lc-label-value\")\n          .attr(\"dy\", \"1.6em\");\n      })\n      .merge(this.entityLabels);\n\n    if (this.all_values && this.values) {\n      this.entityLabels.each(function(d, index) {\n        const entity = d3.select(this);\n        const {color, colorShadow} = _this.getColorsByValue(_this.values.color[utils.getKey(d, dataKeys.color)]);\n        \n        const label = _this._getLabelText(_this.values, _this.labelNames, d);\n        const value = _this.yAxis.tickFormat()(_this.values.axis_y[utils.getKey(d, dataKeys.axis_y)]);\n        const name = label.length < 13 ? label : label.substring(0, 10) + \"...\";//\"…\";\n        const valueHideLimit = _this.ui.chart.labels.min_number_of_entities_when_values_hide;\n\n        entity.select(\"circle\").style(\"fill\", color);\n        entity.selectAll(\".vzb-lc-labelname\")\n          .text(name + \" \" + (_this.data.length < valueHideLimit ? value : \"\"))\n        entity.select(\".vzb-lc-labelfill\")\n          .style(\"fill\", colorShadow)\n        entity.append(\"title\").text(label + \" \" + value);\n\n        entity.select(\".vzb-lc-label-value\")\n          .style(\"fill\", colorShadow);\n\n      });\n    }\n\n    //line template\n    this.line = d3.line()\n    //see https://bl.ocks.org/mbostock/4342190\n    //\"monotone\" can also work. \"basis\" would skip the points on the sharp turns. \"linear\" is ugly\n      .curve(d3.curveMonotoneX)\n      .x(d => _this.xScale(d[0]))\n      .y(d => _this.yScale(d[1]));\n  },\n\n  getColorsByValue(colorValue) {\n    return { \n      color: colorValue != null ? this.cScale(colorValue) : this.COLOR_WHITEISH,\n      colorShadow: colorValue != null ? this.model.marker.color.getColorShade({\n          colorID: colorValue,\n          shadeID: \"shade\"\n        }) : this.COLOR_WHITEISH_SHADE\n    }\n  },\n\n  updateColors() {\n    const _this = this;        \n    const dataKeys = this.dataKeys;\n    const valuesColor = this.values.color;\n    \n    this.cScale = this.model.marker.color.getScale();\n    \n    this.entityLabels.each(function(d, index) {\n      const entity = d3.select(this);\n      const {color, colorShadow} = _this.getColorsByValue(valuesColor[utils.getKey(d, dataKeys.color)]);\n\n      entity.select(\"circle\").style(\"fill\", color);\n      entity.select(\".vzb-lc-labelfill\")\n        .style(\"fill\", colorShadow)\n      entity.select(\".vzb-lc-label-value\")\n        .style(\"fill\", colorShadow);\n    });\n\n    this.entityLines.each(function(d, index) {\n      const entity = d3.select(this);\n      const {color, colorShadow} = _this.getColorsByValue(valuesColor[utils.getKey(d, dataKeys.color)]);\n      \n      entity.select(\".vzb-lc-line\").style(\"stroke\", color);\n      entity.select(\".vzb-lc-line-shadow\").style(\"stroke\", colorShadow);\n    });\n  },\n  /*\n   * UPDATE TIME:\n   * Ideally should only update when time or data changes\n   */\n  updateTime() {\n    const _this = this;\n    const KEY = this.KEY;\n    const time_1 = (this.time === null) ? this.model.time.value : this.time;\n    this.time = this.model.time.value;\n    this.duration = this.model.time.playing && (this.time - time_1 > 0) ? this.model.time.delayAnimations : 0;\n\n    const timeDim = this.model.time.getDimension();\n    const filter = {};\n\n    filter[timeDim] = this.time;\n\n    this.prev_steps = this.all_steps.filter(f => f < _this.time);\n\n    this.timeUpdatedOnce = true;\n  },\n\n  profiles: {\n    \"small\": {\n      margin: {\n        top: 30,\n        right: 20,\n        left: 40,\n        bottom: 20\n      },\n      infoElHeight: 16,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 60,\n      text_padding: 12,\n      lollipopRadius: 6,\n      limitMaxTickNumberX: 5\n    },\n    \"medium\": {\n      margin: {\n        top: 40,\n        right: 60,\n        left: 60,\n        bottom: 25\n      },\n      infoElHeight: 20,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 80,\n      text_padding: 15,\n      lollipopRadius: 7,\n      limitMaxTickNumberX: 10\n    },\n    \"large\": {\n      margin: {\n        top: 50,\n        right: 60,\n        left: 75,\n        bottom: 30\n      },\n      infoElHeight: 22,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 100,\n      text_padding: 20,\n      lollipopRadius: 9,\n      limitMaxTickNumberX: 0 // unlimited\n    }\n  },\n  presentationProfileChanges: {\n    \"medium\": {\n      margin: { top: 70, bottom: 40, left: 70 },\n      yAxisTitleBottomMargin: 20,\n      xAxisTitleBottomMargin: 20,\n      infoElHeight: 26,\n      text_padding: 30\n    },\n    \"large\": {\n      margin: { top: 70, bottom: 50, left: 70 },\n      yAxisTitleBottomMargin: 20,\n      xAxisTitleBottomMargin: 20,\n      infoElHeight: 32,\n      text_padding: 36,\n      hideSTitle: true\n    }\n  },\n\n  timeSliderProfiles: {\n    small: {\n      margin: {\n        top: 7,\n        right: 15,\n        bottom: 10,\n        left: 60\n      }\n    },\n    medium: {\n      margin: {\n        top: 10,\n        right: 15,\n        bottom: 10,\n        left: 60\n      }\n    },\n    large: {\n      margin: {\n        top: 5,\n        right: 15,\n        bottom: 10,\n        left: 75\n      }\n    }\n  },\n\n  /*\n   * RESIZE:\n   * Executed whenever the container is resized\n   * Ideally, it contains only operations related to size\n   */\n  updateSize() {\n\n    const _this = this;\n    const values = this.values;\n    const KEY = this.KEY;\n    const isRTL = this.model.locale.isRTL();\n\n    const padding = 2;\n\n    this.activeProfile = this.getActiveProfile(this.profiles, this.presentationProfileChanges);\n    this.margin = this.activeProfile.margin;\n    this.tick_spacing = this.activeProfile.tick_spacing;\n\n    const infoElHeight = this.activeProfile.infoElHeight;\n\n    //adjust right this.margin according to biggest label\n\n    let longestLabelWidth = 0;\n\n    this.entityLabels.selectAll(\".vzb-lc-labelname\")\n      .attr(\"dx\", _this.activeProfile.text_padding)\n      .each(function(d, index) {\n        const width = this.getComputedTextLength();\n        if (width > longestLabelWidth) longestLabelWidth = width;\n      });\n\n    this.entityLabels.selectAll(\".vzb-lc-circle\")\n      .attr(\"r\", this.shadowWidth ? _this.activeProfile.lollipopRadius : _this.activeProfile.lollipopRadius * 0.8);\n\n    const magicMargin = 20;\n    this.margin.right = Math.max(this.margin.right, longestLabelWidth + this.activeProfile.text_padding + magicMargin);\n\n    //stage\n    this.height = (parseInt(this.element.style(\"height\"), 10) - this.margin.top - this.margin.bottom) || 0;\n    this.width = (parseInt(this.element.style(\"width\"), 10) - this.margin.left - this.margin.right) || 0;\n\n    if (this.height <= 0 || this.width <= 0) return utils.warn(\"Line chart updateSize() abort: vizabi container is too little or has display:none\");\n\n    this.linesContainerCrop\n      .attr(\"width\", this.width)\n      .attr(\"height\", Math.max(0, this.height));\n\n    this.labelsContainerCrop\n      .attr(\"width\", this.width + this.margin.right)\n      .attr(\"height\", Math.max(0, this.height));\n\n    this.collisionResolver.height(this.height);\n\n    this.graph\n      .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\n    this.yScale.range([this.height - this.activeProfile.lollipopRadius, this.activeProfile.lollipopRadius]);\n    this.xScale.range([this.rangeXShift, this.width * this.rangeXRatio + this.rangeXShift]);\n\n\n    this.yAxis.scale(this.yScale)\n      .tickSizeInner(-this.width)\n      .tickSizeOuter(0)\n      .tickPadding(6)\n      .tickSizeMinor(-this.width, 0)\n      .labelerOptions({\n        scaleType: this.model.marker.axis_y.scaleType,\n        toolMargin: this.margin,\n        limitMaxTickNumber: 6,\n        viewportLength: this.height,\n        formatter: this.model.marker.axis_y.getTickFormatter()\n      });\n\n    this.xAxis.scale(this.xScale)\n      .tickSizeInner(-this.height)\n      .tickSizeOuter(0)\n      .tickSizeMinor(-this.height, 0)\n      .tickPadding(6)\n      .labelerOptions({\n        scaleType: this.model.marker.axis_x.scaleType,\n        limitMaxTickNumber: this.activeProfile.limitMaxTickNumberX,\n        toolMargin: this.margin,\n        bump: this.activeProfile.text_padding * 2,\n        formatter: this.model.marker.axis_x.getTickFormatter()\n        //showOuter: true\n      });\n\n    this.xAxisElContainer\n      .attr(\"width\", this.width + this.activeProfile.text_padding * 2)\n      .attr(\"height\", this.activeProfile.margin.bottom + this.height)\n      .attr(\"y\", -1)\n      .attr(\"x\", -this.activeProfile.text_padding);\n\n    this.xAxisEl\n      .attr(\"transform\", \"translate(\" + (this.activeProfile.text_padding - 1) + \",\" + (this.height + 1) + \")\");\n\n    this.yAxisElContainer\n      .attr(\"width\", this.activeProfile.margin.left + this.width)\n      .attr(\"height\", Math.max(0, this.height))\n      .attr(\"x\", -this.activeProfile.margin.left);\n    this.yAxisEl\n      .attr(\"transform\", \"translate(\" + (this.activeProfile.margin.left - 1) + \",\" + 0 + \")\");\n\n    this.yAxisEl.call(this.yAxis);\n    this.xAxisEl.call(this.xAxis);\n\n    this.yTitleEl\n      .style(\"font-size\", infoElHeight + \"px\")\n      .attr(\"transform\", \"translate(\" + (10 - this.activeProfile.margin.left + (isRTL ? infoElHeight * 1.4 : 0 )) + \", -\" + this.activeProfile.yAxisTitleBottomMargin + \")\");\n\n    const yTitleText = this.yTitleEl.select(\"text\").text(this.strings.title.Y + this.strings.unit.Y);\n    if (yTitleText.node().getBBox().width > this.width) yTitleText.text(this.strings.title.Y);\n\n    if (this.yInfoEl.select(\"svg\").node()) {\n      const titleBBox = this.yTitleEl.node().getBBox();\n      const t = utils.transform(this.yTitleEl.node());\n\n      this.yInfoEl.select(\"svg\")\n        .attr(\"width\", infoElHeight + \"px\")\n        .attr(\"height\", infoElHeight + \"px\");\n      this.yInfoEl.attr(\"transform\", \"translate(\"\n        + (isRTL ? 10 - this.activeProfile.margin.left : titleBBox.x + t.translateX + titleBBox.width + infoElHeight * 0.4) + \",\"\n        + (t.translateY - infoElHeight * 0.8) + \")\");\n    }\n\n    const warnBB = this.dataWarningEl.select(\"text\").node().getBBox();\n    this.dataWarningEl.select(\"svg\")\n      .attr(\"width\", warnBB.height * 0.75)\n      .attr(\"height\", warnBB.height * 0.75)\n      .attr(\"x\", -warnBB.width - warnBB.height * 1.2)\n      .attr(\"y\", -warnBB.height * 0.65);\n\n    this.dataWarningEl\n      .attr(\"transform\", \"translate(\" + (this.width + this.margin.right * 0.85) +\n        \",-\" + this.activeProfile.yAxisTitleBottomMargin + \")\")\n      .select(\"text\");\n\n\n    const xTitleText = this.xTitleEl.select(\"text\").text(this.strings.title.X + this.strings.unit.X);\n\n    this.xTitleEl\n      .style(\"font-size\", infoElHeight + \"px\")\n      .attr(\"transform\", \"translate(\" +\n        (this.width + this.activeProfile.text_padding + this.activeProfile.yAxisTitleBottomMargin) + \",\" +\n        (this.height + xTitleText.node().getBBox().height  * 0.72) + \")\");\n\n    if (xTitleText.node().getBBox().width > this.width - 100) xTitleText.text(this.strings.title.X);\n\n    // adjust the vertical dashed line\n    this.verticalNow.attr(\"y1\", this.yScale.range()[0]).attr(\"y2\", this.yScale.range()[1])\n      .attr(\"x1\", 0).attr(\"x2\", 0);\n    this.projectionX.attr(\"y1\", _this.yScale.range()[0]);\n    this.projectionY.attr(\"x2\", _this.xScale.range()[0]);\n\n    if (utils.isTouchDevice()) {\n      _this.tooltip.classed(\"vzb-hidden\", true);\n      _this.verticalNow.style(\"opacity\", 1);\n      _this.projectionX.style(\"opacity\", 0);\n      _this.projectionY.style(\"opacity\", 0);\n      _this.xAxisEl.call(_this.xAxis.highlightValue(_this.time));\n      _this.yAxisEl.call(_this.yAxis.highlightValue(\"none\"));\n      _this.graph.selectAll(\".vzb-lc-entity\").each(function() {\n        d3.select(this).classed(\"vzb-dimmed\", false).classed(\"vzb-hovered\", false);\n      });\n\n      _this.hoveringNow = null;\n    }\n    const opts = {\n      rangeMax: this.xScale.range()[1],\n      mRight: longestLabelWidth - magicMargin,\n      profile: this.timeSliderProfiles[this.getLayoutProfile()]\n    };\n    this.parent.trigger(\"myEvent\", opts);\n\n    this.sizeUpdatedOnce = true;\n  },\n\n  /*\n   * REDRAW DATA POINTS:\n   * Here plotting happens\n   */\n  redrawDataPoints() {\n    const _this = this;\n    const KEYS = this.KEYS;\n    const KEY = this.KEY;\n    const dataKeys = this.dataKeys;\n//    var values = this.values;\n\n    if (!_this.all_values) return;\n    this.model.marker.getFrame(this.time, (values, time) => {\n\n      if (!_this._frameIsValid(values)) return;\n      _this.values = values;\n      if (!_this.timeUpdatedOnce) {\n        _this.updateTime();\n      }\n      if (!_this.sizeUpdatedOnce) {\n        _this.updateSize();\n      }\n      _this.updateDoubtOpacity();\n\n      _this.entityLines\n        .each(function(d, index) {\n          const entity = d3.select(this);\n\n          const {color, colorShadow} = _this.getColorsByValue(values.color[utils.getKey(d, dataKeys.color)]);\n          \n          //TODO: optimization is possible if getFrame would return both x and time\n          //TODO: optimization is possible if getFrame would return a limited number of points, say 1 point per screen pixel\n//          const startTime = new Date();\n\n          const xy = _this.prev_steps.map((frame, i) => [frame, _this.all_values[frame] ? _this.all_values[frame].axis_y[utils.getKey(d, dataKeys.axis_y)] : null])\n            .filter(d => d[1] || d[1] === 0);\n//          timer += new Date() - startTime;\n          // add last point\n          if (values.axis_y[utils.getKey(d, dataKeys.axis_y)]) {\n            xy.push([values.axis_x[utils.getKey(d, dataKeys.axis_x)], values.axis_y[utils.getKey(d, dataKeys.axis_y)]]);\n          }\n\n          if (xy.length > 0) {\n            _this.cached[d[KEY]] = {\n              valueX: xy[xy.length - 1][0],\n              valueY: xy[xy.length - 1][1]\n            };\n          } else {\n            delete _this.cached[d[KEY]];\n          }\n\n          // the following fixes the ugly line butts sticking out of the axis line\n          //if(x[0]!=null && x[1]!=null) xy.splice(1, 0, [(+x[0]*0.99+x[1]*0.01), y[0]]);\n          const path2 = entity.select(\".vzb-lc-line\");\n\n          if (_this.model.time.playing && _this.totalLength_1[d[KEY]] === null) {\n            _this.totalLength_1[d[KEY]] = path2.node().getTotalLength();\n          }\n          const line = _this.line(xy) || \"\";\n\n          const path1 = entity.select(\".vzb-lc-line-shadow\")\n\n            .style(\"stroke\", colorShadow)\n            .style(\"stroke-width\", _this.shadowWidth + \"px\")\n            .attr(\"transform\", \"translate(0, \" + (_this.shadowWidth - _this.lineWidth) + \")\")\n            .attr(\"d\", line);\n          path2\n          //.style(\"filter\", \"none\")\n            .style(\"stroke\", color)\n            .style(\"stroke-width\", _this.lineWidth + \"px\")\n            .attr(\"d\", line);\n          const totalLength = path2.node().getTotalLength();\n\n          // this section ensures the smooth transition while playing and not needed otherwise\n          if (_this.model.time.playing) {\n\n            path1\n              .interrupt()\n              .attr(\"stroke-dasharray\", totalLength)\n              .attr(\"stroke-dashoffset\", totalLength - _this.totalLength_1[d[KEY]])\n              .transition()\n              .delay(0)\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"stroke-dashoffset\", 0);\n            path2\n              .interrupt()\n              .attr(\"stroke-dasharray\", totalLength)\n              .attr(\"stroke-dashoffset\", totalLength - _this.totalLength_1[d[KEY]])\n              .transition()\n              .delay(0)\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"stroke-dashoffset\", 0);\n\n            _this.totalLength_1[d[KEY]] = totalLength;\n          } else {\n            //reset saved line lengths\n            _this.totalLength_1[d[KEY]] = null;\n\n            path1\n              .attr(\"stroke-dasharray\", \"none\")\n              .attr(\"stroke-dashoffset\", \"none\");\n\n            path2\n              .attr(\"stroke-dasharray\", \"none\")\n              .attr(\"stroke-dashoffset\", \"none\");\n          }\n\n        });\n\n      _this.entityLabels\n        .each(function(d, index) {\n          const entity = d3.select(this);\n          if (_this.cached[d[KEY]]) {\n            d.valueX = _this.xScale(_this.cached[d[KEY]][\"valueX\"]);\n            d.valueY = _this.yScale(_this.cached[d[KEY]][\"valueY\"]);\n            entity\n              .classed(\"vzb-hidden\", false)\n              .transition()\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"transform\", \"translate(\" + d.valueX + \",0)\");\n\n            entity.select(\".vzb-lc-circle\")\n              .transition()\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"cy\", d.valueY + 1);\n\n            if (_this.data.length < _this.ui.chart.labels.min_number_of_entities_when_values_hide * KEYS.length) {\n              const label = _this._getLabelText(_this.values, _this.labelNames, d);\n              const value = _this.yAxis.tickFormat()(_this.cached[d[KEY]][\"valueY\"]);\n              const name = label.length < 13 ? label : label.substring(0, 10) + \"...\";//\"…\";\n\n              entity.selectAll(\".vzb-lc-labelname\")\n                .text(name + \" \" + value);\n            }\n\n            entity.select(\".vzb-lc-label\")\n              .transition()\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"transform\", \"translate(0,\" + d.valueY + \")\");\n\n          } else {\n            entity\n              .classed(\"vzb-hidden\", true);\n          }\n        });\n      _this.verticalNow\n        .transition()\n        .duration(_this.duration)\n        .ease(d3.easeLinear)\n        .attr(\"transform\", \"translate(\" + _this.xScale(d3.min([_this.model.marker.axis_x.getZoomedMax(), _this.time])) + \",0)\");\n\n\n      if (!_this.hoveringNow && _this.time - _this.model.time.start !== 0) {\n        if (!_this.ui.chart.hideXAxisValue) _this.xAxisEl.call(\n          _this.xAxis\n            .highlightTransDuration(_this.duration)\n            .highlightValue(_this.time)\n        );\n        _this.verticalNow.style(\"opacity\", 1);\n      } else {\n        _this.verticalNow.style(\"opacity\", 0);\n      }\n\n      // Call flush() after any zero-duration transitions to synchronously flush the timer queue\n      // and thus make transition instantaneous. See https://github.com/mbostock/d3/issues/1951\n      if (_this.duration == 0) {\n        d3.timerFlush();\n      }\n\n      // cancel previously queued simulation if we just ordered a new one\n      // then order a new collision resolving\n      clearTimeout(_this.collisionTimeout);\n      _this.collisionTimeout = setTimeout(() => {\n        _this.entityLabels.call(_this.collisionResolver.time(_this.xScale(_this.time)));\n      }, _this.model.time.delayAnimations * 1.5);\n\n    });\n  },\n\n  entityMousemove(me, index, context, closestToMouse) {\n    const _this = context;\n    const KEY = _this.KEY;\n    const values = _this.values;\n\n    const mouse = d3.mouse(_this.element.node()).map(d => parseInt(d));\n\n    let resolvedTime = _this.xScale.invert(mouse[0] - _this.margin.left);\n    if (_this.time - resolvedTime < 0) {\n      resolvedTime = _this.time;\n    } else if (resolvedTime < this.model.time[\"start\"]) {\n      resolvedTime = this.model.time[\"start\"];\n    }\n    let resolvedValue;\n\n    const mousePos = mouse[1] - _this.margin.top;\n\n    if (!utils.isDate(resolvedTime)) resolvedTime = this.model.time.parse(resolvedTime);\n\n    this.model.marker.getFrame(resolvedTime, data => {\n      if (!_this._frameIsValid(data)) return;\n      //const nearestKey = _this.getNearestKey(_this.yScale.invert(mousePos), data.axis_y);\n      const nearestKey = _this.getNearestKey(mousePos, data.axis_y, _this.yScale.bind(_this));\n      resolvedValue = data.axis_y[nearestKey];\n      me = _this.dataHash[nearestKey];\n      if (!_this.model.marker.isHighlighted(me)) {\n        _this.model.marker.clearHighlighted();\n        _this.model.marker.highlightMarker(me);\n      }\n      _this.hoveringNow = me;\n\n      if (utils.isNaN(resolvedValue)) return;\n\n      const scaledTime = _this.xScale(resolvedTime);\n      const scaledValue = _this.yScale(resolvedValue);\n\n      if (_this.ui.chart.whenHovering.showTooltip) {\n        //position tooltip\n        _this.tooltip\n        //.style(\"right\", (_this.width - scaledTime + _this.margin.right ) + \"px\")\n          .style(\"left\", (scaledTime + _this.margin.left) + \"px\")\n          .style(\"bottom\", (_this.height - scaledValue + _this.margin.bottom) + \"px\")\n          .text(_this.yAxis.tickFormat()(resolvedValue))\n          .classed(\"vzb-hidden\", false);\n      }\n\n      // bring the projection lines to the hovering point\n      if (_this.ui.chart.whenHovering.hideVerticalNow) {\n        _this.verticalNow.style(\"opacity\", 0);\n      }\n\n      if (_this.ui.chart.whenHovering.showProjectionLineX) {\n        _this.projectionX\n          .style(\"opacity\", 1)\n          .attr(\"y2\", scaledValue)\n          .attr(\"x1\", scaledTime)\n          .attr(\"x2\", scaledTime);\n      }\n      if (_this.ui.chart.whenHovering.showProjectionLineY) {\n        _this.projectionY\n          .style(\"opacity\", 1)\n          .attr(\"y1\", scaledValue)\n          .attr(\"y2\", scaledValue)\n          .attr(\"x1\", scaledTime);\n      }\n\n      if (_this.ui.chart.whenHovering.higlightValueX) _this.xAxisEl.call(\n        _this.xAxis.highlightValue(resolvedTime).highlightTransDuration(0)\n      );\n\n      if (_this.ui.chart.whenHovering.higlightValueY) _this.yAxisEl.call(\n        _this.yAxis.highlightValue(resolvedValue).highlightTransDuration(0)\n      );\n\n      clearTimeout(_this.unhoverTimeout);\n\n    });\n  },\n\n  entityMouseout(me, index, context) {\n    const _this = context;\n    if (d3.event.relatedTarget && d3.select(d3.event.relatedTarget).classed(\"vzb-tooltip\")) return;\n\n    // hide and show things like it was before hovering\n    _this.unhoverTimeout = setTimeout(() => {\n      _this.tooltip.classed(\"vzb-hidden\", true);\n      _this.verticalNow.style(\"opacity\", 1);\n      _this.projectionX.style(\"opacity\", 0);\n      _this.projectionY.style(\"opacity\", 0);\n      _this.xAxisEl.call(_this.xAxis.highlightValue(_this.time));\n      _this.yAxisEl.call(_this.yAxis.highlightValue(\"none\"));\n\n      _this.model.marker.clearHighlighted();\n\n      _this.hoveringNow = null;\n    }, 300);\n\n  },\n\n  /*\n   * Highlights all hovered lines\n   */\n  highlightLines() {\n    const _this = this;\n    const KEYS = this.KEYS;\n    const KEY = this.KEY;\n    const OPACITY_HIGHLT = 1.0;\n    const OPACITY_HIGHLT_DIM = 0.3;\n    const OPACITY_SELECT = 1.0;\n    const OPACITY_REGULAR = this.model.marker.opacityRegular;\n    const OPACITY_SELECT_DIM = this.model.marker.opacitySelectDim;\n\n    const someHighlighted = (this.model.marker.highlight.length > 0);\n    this.someSelected = (this.model.marker.select.length > 0);\n\n    // when pointer events need update...\n\n    this.nonSelectedOpacityZero = _this.model.marker.opacitySelectDim < 0.01;\n    const selected = {};\n    _this.model.marker.getSelected().map(d => {\n        selected[utils.getKey(d, KEYS)] = true;\n      }\n    );\n//    const startTime = new Date();\n    this.entityLines.style(\"opacity\", (d) => {\n      if (_this.model.marker.isHighlighted(d)) return OPACITY_HIGHLT;\n      if (_this.someSelected) {\n        return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n      }\n      if (someHighlighted) return OPACITY_HIGHLT_DIM;\n      return OPACITY_REGULAR;\n    });\n    this.entityLabels.style(\"opacity\", (d) => {\n      if (_this.model.marker.isHighlighted(d)) {\n        d.sortValue = 1;\n        return OPACITY_HIGHLT;\n      } else {\n        d.sortValue = 0;\n      }\n      if (_this.someSelected) {\n        return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n      }\n      if (someHighlighted) return OPACITY_HIGHLT_DIM;\n      return OPACITY_REGULAR;\n    }).attr(\"pointer-events\", d => {\n      if(!_this.someSelected || !_this.nonSelectedOpacityZero || selected[d[KEY]]) {\n        d.hidden = false;\n        return \"visible\";   \n      } else {\n        d.hidden = true;\n        return \"none\";\n      }\n    })\n    .sort(function(x, y){\n      return d3.ascending(x.sortValue, y.sortValue);\n    });\n/*\n//    const startTime = new Date();\n//    console.log(new Date() - startTime);\n    this.graph.selectAll(\".vzb-lc-entity\").each(function() {\n      d3.select(this)\n        .style(\"opacity\", d => {\n          if (_this.model.marker.isHighlighted(d)) return OPACITY_HIGHLT;\n          if (_this.someSelected) {\n            return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n          }\n          if (someHighlighted) return OPACITY_HIGHLT_DIM;\n          return OPACITY_REGULAR;\n        })\n    });\n*/\n\n  },\n\n  zoomToMaxMin() { \n    if (\n      this.model.marker.axis_x.getZoomedMin() != null &&\n      this.model.marker.axis_x.getZoomedMax() != null) {\n      this.xScale.domain([this.model.marker.axis_x.getZoomedMin(), this.model.marker.axis_x.getZoomedMax()]);\n      this.xAxisEl.call(this.xAxis);\n    }\n\n    if (\n      this.model.marker.axis_y.getZoomedMin() != null &&\n      this.model.marker.axis_y.getZoomedMax() != null) {\n      if ((this.model.marker.axis_y.getZoomedMin() <= 0 || this.model.marker.axis_y.getZoomedMax() <= 0)\n        && this.model.marker.axis_y.scaleType == \"log\") {\n        this.yScale = d3.scaleGenericlog()\n          .domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()])\n          .range(this.yScale.range());\n        this.model.marker.axis_y.scale = d3.scaleGenericlog()\n          .domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()])\n          .range(this.yScale.range());\n        this.yScale = this.model.marker.axis_y.scale;\n      } else {\n        this.yScale.domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()]);\n      }\n      this.yAxisEl.call(this.yAxis);\n    }\n  },\n\n\n  /**\n   * Returns key from obj which value has the smallest difference with val\n   */\n  getNearestKey(val, obj, fn) {\n    //const startTime = new Date();\n    const KEYS = this.KEYS;\n    let keys = Object.keys(obj);\n\n    if (this.someSelected && this.nonSelectedOpacityZero) {\n      keys = this.model.marker.select.map(keyObj => {\n        return utils.getKey(keyObj, KEYS);\n      });\n    }\n    let resKey = keys[0];\n    for (let i = 1; i < keys.length; i++) {\n      let key = keys[i];\n      \n      if (Math.abs((fn ? fn(obj[key]) : obj[key]) - val) < Math.abs((fn ? fn(obj[resKey]) : obj[resKey]) - val)) {\n        resKey = key;\n      }\n    }\n    //console.log(new Date() - startTime);\n    return resKey;\n  },\n\n  _getLabelText(values, labelNames, d) {\n    return this.KEYS.map(key => values[labelNames[key]] ? values[labelNames[key]][d[key]] : d[key]).join(\", \");\n  }\n});\n\nexport default LCComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/component.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles.scss\n// module id = 2\n// module chunks = 0 1","module.exports = \"<!-- LineChart Component -->\\n<div class=\\\"vzb-linechart\\\">\\n    <svg class=\\\"vzb-linechart-svg\\\">\\n        <g class=\\\"vzb-lc-graph\\\">\\n\\n            <svg class=\\\"vzb-lc-axis-x\\\"><g></g></svg>\\n            <svg class=\\\"vzb-lc-axis-y\\\"><g></g></svg>\\n            <text class=\\\"vzb-lc-axis-x-value\\\"></text>\\n            <text class=\\\"vzb-lc-axis-y-value\\\"></text>\\n            <svg class=\\\"vzb-lc-lines-crop\\\">\\n                <svg class=\\\"vzb-lc-lines\\\"></svg>\\n                <line class=\\\"vzb-lc-projection-x\\\"></line>\\n                <line class=\\\"vzb-lc-projection-y\\\"></line>\\n            </svg>\\n            <svg class=\\\"vzb-lc-labels-crop\\\">\\n                <g class=\\\"vzb-lc-labels\\\">\\n                    <line class=\\\"vzb-lc-vertical-now\\\"></line>\\n                </g>\\n            </svg>\\n\\n            <g class=\\\"vzb-lc-axis-y-title\\\"></g>\\n            <g class=\\\"vzb-lc-axis-x-title\\\"></g>\\n            <g class=\\\"vzb-lc-axis-y-info\\\"></g>\\n\\n            <g class=\\\"vzb-data-warning vzb-noexport\\\">\\n                <svg></svg>\\n                <text></text>\\n            </g>\\n\\n\\n            <!--filter id=\\\"vzb-lc-filter-dropshadow\\\"> \\n              <feOffset result=\\\"offOut\\\" in=\\\"SourceGraphic\\\" dx=\\\"0\\\" dy=\\\"2\\\" />\\n              <feColorMatrix result = \\\"matrixOut\\\" in = \\\"offOut\\\" type = \\\"matrix\\\"\\n                             values = \\\"0.3 .0 .0 .0 .0\\n                                       .0 .3 .0 .0 .0\\n                                       .0 .0 .3 .0 .0\\n                                       1.0 1.0 1.0 1.0 .0\\\"/>\\n              <feGaussianBlur result=\\\"blurOut\\\" in=\\\"matrixOut\\\" stdDeviation=\\\"0.8\\\" />\\n              <feBlend in=\\\"SourceGraphic\\\" in2=\\\"blurOut\\\" mode=\\\"normal\\\" />\\n            </filter-->\\n\\n        </g>\\n    </svg>\\n    <div class=\\\"vzb-tooltip vzb-hidden\\\"></div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/template.html\n// module id = 3\n// module chunks = 0 1"],"sourceRoot":""}