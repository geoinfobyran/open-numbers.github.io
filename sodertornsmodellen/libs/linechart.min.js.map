{"version":3,"sources":["webpack:///linechart.min.js","webpack:///webpack/bootstrap d6e66634006a274313d8?4fa3","webpack:///./src/index.js?9552","webpack:///./src/component.js?a623","webpack:///./src/template.html?60fe"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_component","_component2","obj","default","VERSION_INFO","version","build","LineChart","Vizabi","Tool","extend","init","placeholder","external_model","this","components","component","model","Component","ui","show_value_when_drag_play","axis_aligned","_super","default_model","state","time","autoconfig","type","entities","excludeIDs","entities_colorlegend","entities_tags","includeOnlyIDs","marker_tags","space","label","use","hook_parent","entities_allpossible","marker_allpossible","marker","axis_x","allow","scales","index","axis_y","color","syncModels","marker_colorlegend","which","hook_rank","hook_geoshape","locale","chart","labels","min_number_of_entities_when_values_hide","whenHovering","hideVerticalNow","showProjectionLineX","showProjectionLineY","higlightValueX","higlightValueY","showTooltip","datawarning","doubtDomain","doubtRange","buttons","dialogs","popup","sidebar","moreoptions","presentation","versionInfo","_Vizabi","utils","_Vizabi$helpers","helpers","axisSmart","collisionResolver","_Vizabi$iconset","iconset","iconWarn","warn","iconQuestion","question","LCComponent","config","context","_this","template","model_expects","model_binds","change:time.value","_readyOnce","getFrame","frame","_frameIsValid","frameChanged","change:time.playing","playing","isTouchDevice","tooltip","classed","change:time.start","all_values","values","updateIndicators","updateShow","zoomToMaxMin","updateSize","redrawDataPoints","highlightLines","change:time.end","change:marker","evt","path","indexOf","yScale","xScale","startOrigin","formatDate","getZoomedMin","endOrigin","getZoomedMax","set","updateTime","change:marker.highlight","change:marker.select","updateDoubtOpacity","change:marker.opacitySelectDim","change:marker.opacityRegular","change:marker.color.palette","updateColors","rangeXRatio","rangeXShift","rangeYRatio","rangeYShift","lineWidthScale","d3","scaleLinear","domain","range","clamp","xAxis","yAxis","COLOR_BLACKISH","COLOR_WHITEISH","COLOR_WHITEISH_SHADE","isDataPreprocessed","timeUpdatedOnce","sizeUpdatedOnce","getNearestKey","memoize","readyOnce","_this2","element","select","graph","yAxisElContainer","yAxisEl","xAxisElContainer","xAxisEl","xTitleEl","yTitleEl","yInfoEl","linesContainerCrop","linesContainer","labelsContainerCrop","labelsContainer","dataWarningEl","verticalNow","projectionX","projectionY","entityLabels","selectAll","entityLines","totalLength_1","TIMEDIM","getDimension","KEYS","unique","_getAllDimensions","exceptType","KEY","join","dataKeys","getDataKeysPerHook","labelNames","getLabelHookNames","selector","filter","valueX","hidden","conceptPropsY","getConceptprops","setIcon","attr","style","Number","Boolean","description","sourceLink","on","parent","findChildByName","pin","rect","getBBox","coord","makeAbsoluteContext","farthestViewportElement","x","y","height","setHook","show","setPos","hide","wScale","highlight","length","selectMarker","ready","all_steps","getAllSteps","updateUIStrings","remove","allValues","entityMousemove","bind","entityMouseout","keys","conceptPropsX","conceptPropsC","translator","getTFunction","strings","title","Y","X","C","unit","append","text","toggle","xTitle","data","enter","merge","yTitle","markerID","alignX","alignY","updateView","opacity","getUTCFullYear","toString","someSelected","getScale","splash","limits","getLimits","min","max","cScale","tickFormat","getTickFormatter","scale","_this3","cached","dataHash","getKeys","map","entity","getKey","lineWidth","shadowWidth","each","highlightMarker","clearHighlighted","labelGroup","_this$getColorsByValu","getColorsByValue","colorShadow","_getLabelText","substring","valueHideLimit","line","curve","curveMonotoneX","colorValue","getColorShade","colorID","shadeID","valuesColor","_this$getColorsByValu2","_this$getColorsByValu3","time_1","duration","delayAnimations","prev_steps","f","profiles","small","margin","top","right","left","bottom","infoElHeight","yAxisTitleBottomMargin","tick_spacing","text_padding","lollipopRadius","limitMaxTickNumberX","medium","large","presentationProfileChanges","xAxisTitleBottomMargin","hideSTitle","timeSliderProfiles","isRTL","activeProfile","getActiveProfile","longestLabelWidth","width","getComputedTextLength","Math","parseInt","tickSizeInner","tickSizeOuter","tickPadding","tickSizeMinor","labelerOptions","scaleType","toolMargin","limitMaxTickNumber","viewportLength","formatter","bump","yTitleText","node","titleBBox","t","transform","translateX","translateY","warnBB","xTitleText","highlightValue","hoveringNow","opts","rangeMax","mRight","profile","getLayoutProfile","trigger","_this$getColorsByValu4","xy","push","valueY","path2","getTotalLength","path1","totalLength","interrupt","transition","delay","ease","easeLinear","start","hideXAxisValue","highlightTransDuration","timerFlush","clearTimeout","collisionTimeout","setTimeout","me","closestToMouse","mouse","resolvedTime","invert","resolvedValue","mousePos","isDate","parse","nearestKey","isHighlighted","isNaN","scaledTime","scaledValue","unhoverTimeout","event","relatedTarget","OPACITY_REGULAR","opacityRegular","OPACITY_SELECT_DIM","opacitySelectDim","someHighlighted","nonSelectedOpacityZero","selected","getSelected","sortValue","sort","ascending","scaleGenericlog","val","fn","keyObj","resKey","key","abs"],"mappings":"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","file":"linechart.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__webpack_require__(2);\n\nvar _component = __webpack_require__(1);\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar VERSION_INFO = { version: \"2.0.1\", build: 1516906861806 };\n\n// LINE CHART TOOL\nvar LineChart = Vizabi.Tool.extend(\"LineChart\", {\n  /**\n   * Initialized the tool\n   * @param {Object} placeholder Placeholder element for the tool\n   * @param {Object} external_model Model as given by the external page\n   */\n  init: function init(placeholder, external_model) {\n\n    this.name = \"linechart\";\n\n    this.components = [{\n      component: _component2.default,\n      placeholder: \".vzb-tool-viz\",\n      model: [\"state.time\", \"state.marker\", \"locale\", \"ui\"] //pass models to component\n    }, {\n      component: Vizabi.Component.get(\"timeslider\"),\n      placeholder: \".vzb-tool-timeslider\",\n      model: [\"state.time\", \"state.marker\", \"ui\"],\n      ui: { show_value_when_drag_play: true, axis_aligned: false }\n    }, {\n      component: Vizabi.Component.get(\"dialogs\"),\n      placeholder: \".vzb-tool-dialogs\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"buttonlist\"),\n      placeholder: \".vzb-tool-buttonlist\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"treemenu\"),\n      placeholder: \".vzb-tool-treemenu\",\n      model: [\"state.marker\", \"state.marker_tags\", \"state.time\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datawarning\"),\n      placeholder: \".vzb-tool-datawarning\",\n      model: [\"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datanotes\"),\n      placeholder: \".vzb-tool-datanotes\",\n      model: [\"state.marker\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"steppedspeedslider\"),\n      placeholder: \".vzb-tool-stepped-speed-slider\",\n      model: [\"state.time\", \"locale\"]\n    }];\n\n    this._super(placeholder, external_model);\n  },\n\n\n  default_model: {\n    \"state\": {\n      \"time\": {\n        \"autoconfig\": {\n          \"type\": \"time\"\n        }\n      },\n      \"entities\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"entities_colorlegend\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      entities_tags: {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"includeOnlyIDs\": [\"tag\"]\n        }\n      },\n      marker_tags: {\n        space: [\"entities_tags\"],\n        label: {\n          use: \"property\"\n        },\n        hook_parent: {}\n      },\n      \"entities_allpossible\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"marker_allpossible\": {\n        \"space\": [\"entities_allpossible\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        }\n      },\n      \"marker\": {\n        \"space\": [\"entities\", \"time\"],\n        \"axis_x\": {\n          \"use\": \"indicator\",\n          \"allow\": { scales: [\"time\"] },\n          \"autoconfig\": {\n            \"index\": 0,\n            \"type\": \"time\"\n          }\n        },\n        \"axis_y\": {\n          \"use\": \"indicator\",\n          \"allow\": { scales: [\"linear\", \"log\"] },\n          \"autoconfig\": {\n            \"type\": \"measure\"\n          }\n        },\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        },\n        \"color\": {\n          \"syncModels\": [\"marker_colorlegend\"],\n          \"autoconfig\": {}\n        }\n      },\n      \"marker_colorlegend\": {\n        \"space\": [\"entities_colorlegend\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"which\": \"name\"\n        },\n        \"hook_rank\": {\n          \"use\": \"property\",\n          \"which\": \"rank\"\n        },\n        \"hook_geoshape\": {\n          \"use\": \"property\",\n          \"which\": \"shape_lores_svg\"\n        }\n      }\n    },\n    locale: {},\n    \"ui\": {\n      \"chart\": {\n        \"labels\": {\n          \"min_number_of_entities_when_values_hide\": 2 //values hide when showing 2 entities or more\n        },\n        \"whenHovering\": {\n          \"hideVerticalNow\": false,\n          \"showProjectionLineX\": true,\n          \"showProjectionLineY\": true,\n          \"higlightValueX\": true,\n          \"higlightValueY\": true,\n          \"showTooltip\": false\n        }\n      },\n      datawarning: {\n        doubtDomain: [],\n        doubtRange: []\n      },\n      \"buttons\": [\"colors\", \"find\", \"show\", \"moreoptions\", \"fullscreen\", \"presentation\"],\n      \"dialogs\": {\n        \"popup\": [\"colors\", \"find\", \"show\", \"moreoptions\"],\n        \"sidebar\": [\"colors\", \"show\"],\n        \"moreoptions\": [\"opacity\", \"speed\", \"axes\", \"colors\", \"presentation\", \"about\"]\n      },\n      \"presentation\": false\n    }\n  },\n\n  versionInfo: VERSION_INFO\n});\n\nexports.default = LineChart;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _Vizabi = Vizabi,\n    utils = _Vizabi.utils,\n    Component = _Vizabi.Component,\n    _Vizabi$helpers = _Vizabi.helpers,\n    axisSmart = _Vizabi$helpers[\"d3.axisWithLabelPicker\"],\n    collisionResolver = _Vizabi$helpers[\"d3.collisionResolver\"],\n    _Vizabi$iconset = _Vizabi.iconset,\n    iconWarn = _Vizabi$iconset.warn,\n    iconQuestion = _Vizabi$iconset.question;\n\n// LINE CHART COMPONENT\n\nvar LCComponent = Component.extend(\"linechart\", {\n  init: function init(config, context) {\n    var _this = this;\n    this.name = \"linechart\";\n    this.template = __webpack_require__(3);\n\n    //define expected models for this component\n    this.model_expects = [{\n      name: \"time\",\n      type: \"time\"\n    }, {\n      name: \"marker\",\n      type: \"marker\"\n    }, {\n      name: \"locale\",\n      type: \"locale\"\n    }, {\n      name: \"ui\",\n      type: \"ui\"\n    }];\n\n    this.model_binds = {\n      \"change:time.value\": function changeTimeValue() {\n        if (!_this._readyOnce) return;\n        _this.model.marker.getFrame(_this.model.time.value, function (frame, time) {\n          if (!_this._frameIsValid(frame)) return utils.warn(\"change:time.value: empty data received from marker.getFrame(). doing nothing\");\n          _this.frameChanged(frame, time);\n        });\n      },\n      \"change:time.playing\": function changeTimePlaying() {\n        // hide tooltip on touch devices when playing\n        if (_this.model.time.playing && utils.isTouchDevice() && !_this.tooltip.classed(\"vzb-hidden\")) _this.tooltip.classed(\"vzb-hidden\", true);\n      },\n      \"change:time.start\": function changeTimeStart() {\n        if (!_this._readyOnce || !_this.all_values || !_this.values) return;\n        _this.updateIndicators();\n        _this.updateShow();\n        _this.zoomToMaxMin();\n        _this.updateSize();\n        _this.redrawDataPoints();\n        _this.highlightLines();\n      },\n      \"change:time.end\": function changeTimeEnd() {\n        if (!_this._readyOnce || !_this.all_values || !_this.values) return;\n        _this.updateIndicators();\n        _this.updateShow();\n        _this.zoomToMaxMin();\n        _this.updateSize();\n        _this.redrawDataPoints();\n        _this.highlightLines();\n      },\n      \"change:marker\": function changeMarker(evt, path) {\n        if (!_this._readyOnce) return;\n        if (path.indexOf(\"domainMin\") > -1 || path.indexOf(\"domainMax\") > -1 || path.indexOf(\"zoomedMin\") > -1 || path.indexOf(\"zoomedMax\") > -1) {\n          if (!_this.yScale || !_this.xScale) return; //abort if building of the scale is in progress\n          if (path.indexOf(\"axis_x\") > -1) {\n            var startOrigin = _this.model.time.formatDate(_this.model.marker.axis_x.getZoomedMin());\n            var endOrigin = _this.model.time.formatDate(_this.model.marker.axis_x.getZoomedMax());\n            _this.model.time.set({\n              startOrigin: startOrigin,\n              endOrigin: endOrigin\n            });\n            return;\n          }\n          if (!_this.all_values || !_this.values) return;\n          _this.updateIndicators();\n          _this.updateShow();\n          _this.zoomToMaxMin();\n          _this.updateSize();\n          _this.updateTime();\n          _this.redrawDataPoints();\n          _this.highlightLines();\n          return;\n        }\n        if (path.indexOf(\"scaleType\") > -1) {\n          if (!_this.all_values || !_this.values) return;\n          _this.updateIndicators();\n          _this.updateShow();\n          _this.zoomToMaxMin();\n          _this.updateSize();\n          _this.redrawDataPoints();\n          _this.highlightLines();\n        }\n      },\n      \"change:marker.highlight\": function changeMarkerHighlight() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.select\": function changeMarkerSelect() {\n        if (!_this._readyOnce) return;\n        _this.updateDoubtOpacity();\n        _this.highlightLines();\n      },\n      \"change:marker.opacitySelectDim\": function changeMarkerOpacitySelectDim() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.opacityRegular\": function changeMarkerOpacityRegular() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.color.palette\": function changeMarkerColorPalette() {\n        if (!_this._readyOnce) return;\n        _this.updateColors();\n      }\n    };\n\n    this._super(config, context);\n\n    this.xScale = null;\n    this.yScale = null;\n\n    this.rangeXRatio = 1;\n    this.rangeXShift = 0;\n\n    this.rangeYRatio = 1;\n    this.rangeYShift = 0;\n    this.lineWidthScale = d3.scaleLinear().domain([0, 20]).range([7, 1]).clamp(true);\n    this.xAxis = axisSmart(\"bottom\");\n    this.yAxis = axisSmart(\"left\");\n\n    this.COLOR_BLACKISH = \"#333\";\n    this.COLOR_WHITEISH = \"#fdfdfd\";\n    this.COLOR_WHITEISH_SHADE = \"#555\";\n\n    this.isDataPreprocessed = false;\n    this.timeUpdatedOnce = false;\n    this.sizeUpdatedOnce = false;\n\n    this.getNearestKey = utils.memoize(this.getNearestKey);\n  },\n\n\n  /*\n   * domReady:\n   * Executed after template is loaded\n   * Ideally, it contains instantiations related to template\n   */\n  readyOnce: function readyOnce() {\n    var _this2 = this;\n\n    var _this = this;\n\n    this.element = d3.select(this.element);\n    this.graph = this.element.select(\".vzb-lc-graph\");\n\n    this.yAxisElContainer = this.graph.select(\".vzb-lc-axis-y\");\n    this.yAxisEl = this.yAxisElContainer.select(\"g\");\n\n    this.xAxisElContainer = this.graph.select(\".vzb-lc-axis-x\");\n    this.xAxisEl = this.xAxisElContainer.select(\"g\");\n\n    this.xTitleEl = this.graph.select(\".vzb-lc-axis-x-title\");\n    this.yTitleEl = this.graph.select(\".vzb-lc-axis-y-title\");\n    this.yInfoEl = this.graph.select(\".vzb-lc-axis-y-info\");\n    this.linesContainerCrop = this.graph.select(\".vzb-lc-lines-crop\");\n    this.linesContainer = this.graph.select(\".vzb-lc-lines\");\n    this.labelsContainerCrop = this.graph.select(\".vzb-lc-labels-crop\");\n    this.labelsContainer = this.graph.select(\".vzb-lc-labels\");\n\n    this.dataWarningEl = this.graph.select(\".vzb-data-warning\");\n\n    this.verticalNow = this.labelsContainer.select(\".vzb-lc-vertical-now\");\n    this.tooltip = this.element.select(\".vzb-tooltip\");\n    //            this.filterDropshadowEl = this.element.select('#vzb-lc-filter-dropshadow');\n    this.projectionX = this.graph.select(\".vzb-lc-projection-x\");\n    this.projectionY = this.graph.select(\".vzb-lc-projection-y\");\n\n    this.entityLabels = this.labelsContainer.selectAll(\".vzb-lc-entity\");\n    this.entityLines = this.linesContainer.selectAll(\".vzb-lc-entity\");\n    this.totalLength_1 = {};\n\n    this.TIMEDIM = this.model.time.getDimension();\n    this.KEYS = utils.unique(this.model.marker._getAllDimensions({ exceptType: \"time\" }));\n    this.KEY = this.KEYS.join(\",\");\n    this.dataKeys = this.model.marker.getDataKeysPerHook();\n    this.labelNames = this.model.marker.getLabelHookNames();\n\n    this.collisionResolver = collisionResolver().selector(\".vzb-lc-label\").value(\"valueY\").filter(function (d, time) {\n      return d.valueX - time === 0 && !d.hidden;\n    });\n\n    //component events\n\n    var conceptPropsY = this.model.marker.axis_y.getConceptprops();\n    utils.setIcon(this.yInfoEl, iconQuestion).select(\"svg\").attr(\"width\", \"0px\").attr(\"height\", \"0px\").style('opacity', Number(Boolean(conceptPropsY.description || conceptPropsY.sourceLink)));\n\n    this.yInfoEl.on(\"click\", function () {\n      _this.parent.findChildByName(\"gapminder-datanotes\").pin();\n    });\n    this.yInfoEl.on(\"mouseover\", function () {\n      var rect = this.getBBox();\n      var coord = utils.makeAbsoluteContext(this, this.farthestViewportElement)(rect.x - 10, rect.y + rect.height + 10);\n      _this.parent.findChildByName(\"gapminder-datanotes\").setHook(\"axis_y\").show().setPos(coord.x, coord.y);\n    });\n    this.yInfoEl.on(\"mouseout\", function () {\n      _this.parent.findChildByName(\"gapminder-datanotes\").hide();\n    });\n\n    this.wScale = d3.scaleLinear().domain(this.model.ui.datawarning.doubtDomain).range(this.model.ui.datawarning.doubtRange);\n\n    this.on(\"resize\", function () {\n      //return if updatesize exists with error\n      if (_this.updateSize()) return;\n      _this.updateTime();\n      _this.redrawDataPoints();\n    });\n    this.graph.on(\"click\", function () {\n      if (_this2.model.marker.highlight.length == 1) {\n        _this.model.marker.selectMarker(_this2.model.marker.highlight[0]);\n      }\n    });\n  },\n  ready: function ready() {\n    var _this = this;\n    this.KEYS = utils.unique(this.model.marker._getAllDimensions({ exceptType: \"time\" }));\n    this.KEY = this.KEYS.join(\",\");\n    this.dataKeys = this.model.marker.getDataKeysPerHook();\n    this.labelNames = this.model.marker.getLabelHookNames();\n\n    this.all_steps = this.model.time.getAllSteps();\n    this.all_values = this.values = null;\n    this.updateTime();\n    this.updateUIStrings();\n    this.updateIndicators();\n    //this.updateShow();\n    this.entityLines.remove();\n    this.entityLabels.remove();\n    //null means we need to calculate all frames before we get to the callback\n    this.model.marker.getFrame(null, function (allValues) {\n      _this.all_values = allValues;\n      _this.model.marker.getFrame(_this.model.time.value, function (values) {\n        if (!_this._frameIsValid(values)) return;\n        _this.values = values;\n        _this.updateShow();\n        if (_this.updateSize()) return;\n        _this.updateDoubtOpacity();\n        _this.zoomToMaxMin();\n        _this.redrawDataPoints();\n        _this.highlightLines();\n        _this.linesContainerCrop.on(\"mousemove\", _this.entityMousemove.bind(_this, null, null, _this)).on(\"mouseleave\", _this.entityMouseout.bind(_this, null, null, _this));\n      });\n    });\n  },\n  _frameIsValid: function _frameIsValid(frame) {\n    return !(!frame || Object.keys(frame.axis_y).length === 0 || Object.keys(frame.axis_x).length === 0 || Object.keys(frame.color).length === 0);\n  },\n  frameChanged: function frameChanged(frame, time) {\n    //    if (time.toString() != this.model.time.value.toString()) return; // frame is outdated\n    this.frame = frame;\n    this.updateTime();\n    if (!this.all_values) return;\n    this.redrawDataPoints();\n  },\n  updateUIStrings: function updateUIStrings() {\n    var _this = this;\n    var conceptPropsY = _this.model.marker.axis_y.getConceptprops();\n    var conceptPropsX = _this.model.marker.axis_x.getConceptprops();\n    var conceptPropsC = _this.model.marker.color.getConceptprops();\n    this.translator = this.model.locale.getTFunction();\n\n    this.strings = {\n      title: {\n        Y: conceptPropsY.name,\n        X: conceptPropsX.name,\n        C: conceptPropsC.name\n      },\n      unit: {\n        Y: conceptPropsY.unit || \"\",\n        X: conceptPropsX.unit || \"\",\n        C: conceptPropsC.unit || \"\"\n      }\n    };\n\n    if (this.strings.unit.Y === \"unit/\" + this.model.marker.axis_y.which) this.strings.unit.Y = \"\";\n    if (this.strings.unit.X === \"unit/\" + this.model.marker.axis_x.which) this.strings.unit.X = \"\";\n    if (this.strings.unit.C === \"unit/\" + this.model.marker.color.which) this.strings.unit.C = \"\";\n\n    if (this.strings.unit.Y) this.strings.unit.Y = \", \" + this.strings.unit.Y;\n    if (this.strings.unit.X) this.strings.unit.X = \", \" + this.strings.unit.X;\n    if (this.strings.unit.C) this.strings.unit.C = \", \" + this.strings.unit.C;\n\n    utils.setIcon(this.dataWarningEl, iconWarn).select(\"svg\").attr(\"width\", \"0px\").attr(\"height\", \"0px\");\n    this.dataWarningEl.append(\"text\").attr(\"text-anchor\", \"end\").text(this.translator(\"hints/dataWarning\"));\n\n    this.dataWarningEl.on(\"click\", function () {\n      _this.parent.findChildByName(\"gapminder-datawarning\").toggle();\n    }).on(\"mouseover\", function () {\n      _this.updateDoubtOpacity(1);\n    }).on(\"mouseout\", function () {\n      _this.updateDoubtOpacity();\n    });\n\n    var xTitle = this.xTitleEl.selectAll(\"text\").data([0]);\n    xTitle = xTitle.enter().append(\"text\").merge(xTitle);\n\n    var yTitle = this.yTitleEl.selectAll(\"text\").data([0]);\n    yTitle = yTitle.enter().append(\"text\").merge(yTitle);\n    yTitle.on(\"click\", function () {\n      _this.parent.findChildByName(\"gapminder-treemenu\").markerID(\"axis_y\").alignX(\"left\").alignY(\"top\").updateView().toggle();\n    });\n  },\n  updateDoubtOpacity: function updateDoubtOpacity(opacity) {\n    if (opacity == null) opacity = this.wScale(+this.time.getUTCFullYear().toString());\n    if (this.someSelected) opacity = 1;\n    this.dataWarningEl.style(\"opacity\", opacity);\n  },\n\n\n  /*\n   * UPDATE INDICATORS\n   */\n  updateIndicators: function updateIndicators() {\n    var _this = this;\n    var KEY = this.KEY;\n\n    //scales\n    this.yScale = this.model.marker.axis_y.getScale();\n    if (!this.splash) {\n      var limits = this.model.marker.axis_y.getLimits(this.model.marker.axis_y.which);\n      this.yScale.domain([limits.min, limits.max]);\n    }\n    this.xScale = this.model.marker.axis_x.getScale();\n    this.cScale = this.model.marker.color.getScale();\n    this.yAxis.tickFormat(this.model.marker.axis_y.getTickFormatter());\n    this.xAxis.tickFormat(this.model.marker.axis_x.getTickFormatter());\n\n    this.collisionResolver.scale(this.yScale).KEY(KEY);\n  },\n\n\n  /*\n   * UPDATE SHOW:\n   * Ideally should only update when show parameters change or data changes\n   */\n  updateShow: function updateShow() {\n    var _this3 = this;\n\n    var _this = this;\n    var KEYS = this.KEYS;\n    var KEY = this.KEY;\n    var dataKeys = this.dataKeys;\n\n    this.cached = {};\n\n    this.dataHash = {};\n    this.data = this.model.marker.getKeys().map(function (entity) {\n      entity[KEY] = utils.getKey(entity, KEYS);\n      _this3.dataHash[entity[KEY]] = entity;\n      return entity;\n    });\n    this.linesContainer.selectAll(\".vzb-lc-entity\").remove();\n    this.entityLines = this.linesContainer.selectAll(\".vzb-lc-entity\").data(this.data);\n\n    this.lineWidth = this.lineWidthScale(this.data.length);\n    if (this.lineWidth >= 2) {\n      this.shadowWidth = this.lineWidth * 1.3;\n    } else {\n      this.shadowWidth = null;\n    }\n    this.labelsContainer.classed(\"small\", !this.shadowWidth);\n    this.entityLines = this.entityLines.enter().append(\"g\").attr(\"class\", function (d) {\n      return \"vzb-lc-entity vzb-lc-entity-\" + d[KEY];\n    }).each(function (d, index) {\n      var entity = d3.select(this);\n      if (_this.shadowWidth) {\n        entity.append(\"path\").attr(\"class\", \"vzb-lc-line-shadow\");\n      } else {}\n\n      entity.append(\"path\").attr(\"class\", \"vzb-lc-line\");\n    }).merge(this.entityLines);\n    this.labelsContainer.selectAll(\".vzb-lc-entity\").remove();\n    this.entityLabels = this.labelsContainer.selectAll(\".vzb-lc-entity\").data(this.data);\n    this.entityLabels = this.entityLabels.enter().append(\"g\").attr(\"class\", \"vzb-lc-entity\").on(\"mouseover\", function (d) {\n      _this.model.marker.highlightMarker(d);\n    }).on(\"mouseout\", function (d) {\n      _this.model.marker.clearHighlighted();\n    }).each(function (d, index) {\n      var entity = d3.select(this);\n\n      entity.append(\"circle\").attr(\"class\", \"vzb-lc-circle\").attr(\"cx\", 0);\n\n      var labelGroup = entity.append(\"g\").attr(\"class\", \"vzb-lc-label\");\n\n      labelGroup.append(\"text\").attr(\"class\", \"vzb-lc-labelname vzb-lc-labelstroke\").attr(\"dy\", \".35em\");\n\n      labelGroup.append(\"text\").attr(\"class\", \"vzb-lc-labelname vzb-lc-labelfill\").attr(\"dy\", \".35em\");\n\n      labelGroup.append(\"text\").attr(\"class\", \"vzb-lc-label-value\").attr(\"dy\", \"1.6em\");\n    }).merge(this.entityLabels);\n\n    if (this.all_values && this.values) {\n      this.entityLabels.each(function (d, index) {\n        var entity = d3.select(this);\n\n        var _this$getColorsByValu = _this.getColorsByValue(_this.values.color[utils.getKey(d, dataKeys.color)]),\n            color = _this$getColorsByValu.color,\n            colorShadow = _this$getColorsByValu.colorShadow;\n\n        var label = _this._getLabelText(_this.values, _this.labelNames, d);\n        var value = _this.yAxis.tickFormat()(_this.values.axis_y[utils.getKey(d, dataKeys.axis_y)]);\n        var name = label.length < 13 ? label : label.substring(0, 10) + \"...\"; //\"…\";\n        var valueHideLimit = _this.ui.chart.labels.min_number_of_entities_when_values_hide;\n\n        entity.select(\"circle\").style(\"fill\", color);\n        entity.selectAll(\".vzb-lc-labelname\").text(name + \" \" + (_this.data.length < valueHideLimit ? value : \"\"));\n        entity.select(\".vzb-lc-labelfill\").style(\"fill\", colorShadow);\n        entity.append(\"title\").text(label + \" \" + value);\n\n        entity.select(\".vzb-lc-label-value\").style(\"fill\", colorShadow);\n      });\n    }\n\n    //line template\n    this.line = d3.line()\n    //see https://bl.ocks.org/mbostock/4342190\n    //\"monotone\" can also work. \"basis\" would skip the points on the sharp turns. \"linear\" is ugly\n    .curve(d3.curveMonotoneX).x(function (d) {\n      return _this.xScale(d[0]);\n    }).y(function (d) {\n      return _this.yScale(d[1]);\n    });\n  },\n  getColorsByValue: function getColorsByValue(colorValue) {\n    return {\n      color: colorValue != null ? this.cScale(colorValue) : this.COLOR_WHITEISH,\n      colorShadow: colorValue != null ? this.model.marker.color.getColorShade({\n        colorID: colorValue,\n        shadeID: \"shade\"\n      }) : this.COLOR_WHITEISH_SHADE\n    };\n  },\n  updateColors: function updateColors() {\n    var _this = this;\n    var dataKeys = this.dataKeys;\n    var valuesColor = this.values.color;\n\n    this.cScale = this.model.marker.color.getScale();\n\n    this.entityLabels.each(function (d, index) {\n      var entity = d3.select(this);\n\n      var _this$getColorsByValu2 = _this.getColorsByValue(valuesColor[utils.getKey(d, dataKeys.color)]),\n          color = _this$getColorsByValu2.color,\n          colorShadow = _this$getColorsByValu2.colorShadow;\n\n      entity.select(\"circle\").style(\"fill\", color);\n      entity.select(\".vzb-lc-labelfill\").style(\"fill\", colorShadow);\n      entity.select(\".vzb-lc-label-value\").style(\"fill\", colorShadow);\n    });\n\n    this.entityLines.each(function (d, index) {\n      var entity = d3.select(this);\n\n      var _this$getColorsByValu3 = _this.getColorsByValue(valuesColor[utils.getKey(d, dataKeys.color)]),\n          color = _this$getColorsByValu3.color,\n          colorShadow = _this$getColorsByValu3.colorShadow;\n\n      entity.select(\".vzb-lc-line\").style(\"stroke\", color);\n      entity.select(\".vzb-lc-line-shadow\").style(\"stroke\", colorShadow);\n    });\n  },\n\n  /*\n   * UPDATE TIME:\n   * Ideally should only update when time or data changes\n   */\n  updateTime: function updateTime() {\n    var _this = this;\n    var KEY = this.KEY;\n    var time_1 = this.time === null ? this.model.time.value : this.time;\n    this.time = this.model.time.value;\n    this.duration = this.model.time.playing && this.time - time_1 > 0 ? this.model.time.delayAnimations : 0;\n\n    var timeDim = this.model.time.getDimension();\n    var filter = {};\n\n    filter[timeDim] = this.time;\n\n    this.prev_steps = this.all_steps.filter(function (f) {\n      return f < _this.time;\n    });\n\n    this.timeUpdatedOnce = true;\n  },\n\n\n  profiles: {\n    \"small\": {\n      margin: {\n        top: 30,\n        right: 20,\n        left: 40,\n        bottom: 20\n      },\n      infoElHeight: 16,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 60,\n      text_padding: 12,\n      lollipopRadius: 6,\n      limitMaxTickNumberX: 5\n    },\n    \"medium\": {\n      margin: {\n        top: 40,\n        right: 60,\n        left: 60,\n        bottom: 25\n      },\n      infoElHeight: 20,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 80,\n      text_padding: 15,\n      lollipopRadius: 7,\n      limitMaxTickNumberX: 10\n    },\n    \"large\": {\n      margin: {\n        top: 50,\n        right: 60,\n        left: 75,\n        bottom: 30\n      },\n      infoElHeight: 22,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 100,\n      text_padding: 20,\n      lollipopRadius: 9,\n      limitMaxTickNumberX: 0 // unlimited\n    }\n  },\n  presentationProfileChanges: {\n    \"medium\": {\n      margin: { top: 70, bottom: 40, left: 70 },\n      yAxisTitleBottomMargin: 20,\n      xAxisTitleBottomMargin: 20,\n      infoElHeight: 26,\n      text_padding: 30\n    },\n    \"large\": {\n      margin: { top: 70, bottom: 50, left: 70 },\n      yAxisTitleBottomMargin: 20,\n      xAxisTitleBottomMargin: 20,\n      infoElHeight: 32,\n      text_padding: 36,\n      hideSTitle: true\n    }\n  },\n\n  timeSliderProfiles: {\n    small: {\n      margin: {\n        top: 7,\n        right: 15,\n        bottom: 10,\n        left: 60\n      }\n    },\n    medium: {\n      margin: {\n        top: 10,\n        right: 15,\n        bottom: 10,\n        left: 60\n      }\n    },\n    large: {\n      margin: {\n        top: 5,\n        right: 15,\n        bottom: 10,\n        left: 75\n      }\n    }\n  },\n\n  /*\n   * RESIZE:\n   * Executed whenever the container is resized\n   * Ideally, it contains only operations related to size\n   */\n  updateSize: function updateSize() {\n\n    var _this = this;\n    var values = this.values;\n    var KEY = this.KEY;\n    var isRTL = this.model.locale.isRTL();\n\n    var padding = 2;\n\n    this.activeProfile = this.getActiveProfile(this.profiles, this.presentationProfileChanges);\n    this.margin = this.activeProfile.margin;\n    this.tick_spacing = this.activeProfile.tick_spacing;\n\n    var infoElHeight = this.activeProfile.infoElHeight;\n\n    //adjust right this.margin according to biggest label\n\n    var longestLabelWidth = 0;\n\n    this.entityLabels.selectAll(\".vzb-lc-labelname\").attr(\"dx\", _this.activeProfile.text_padding).each(function (d, index) {\n      var width = this.getComputedTextLength();\n      if (width > longestLabelWidth) longestLabelWidth = width;\n    });\n\n    this.entityLabels.selectAll(\".vzb-lc-circle\").attr(\"r\", this.shadowWidth ? _this.activeProfile.lollipopRadius : _this.activeProfile.lollipopRadius * 0.8);\n\n    var magicMargin = 20;\n    this.margin.right = Math.max(this.margin.right, longestLabelWidth + this.activeProfile.text_padding + magicMargin);\n\n    //stage\n    this.height = parseInt(this.element.style(\"height\"), 10) - this.margin.top - this.margin.bottom || 0;\n    this.width = parseInt(this.element.style(\"width\"), 10) - this.margin.left - this.margin.right || 0;\n\n    if (this.height <= 0 || this.width <= 0) return utils.warn(\"Line chart updateSize() abort: vizabi container is too little or has display:none\");\n\n    this.linesContainerCrop.attr(\"width\", this.width).attr(\"height\", Math.max(0, this.height));\n\n    this.labelsContainerCrop.attr(\"width\", this.width + this.margin.right).attr(\"height\", Math.max(0, this.height));\n\n    this.collisionResolver.height(this.height);\n\n    this.graph.attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\n    this.yScale.range([this.height - this.activeProfile.lollipopRadius, this.activeProfile.lollipopRadius]);\n    this.xScale.range([this.rangeXShift, this.width * this.rangeXRatio + this.rangeXShift]);\n\n    this.yAxis.scale(this.yScale).tickSizeInner(-this.width).tickSizeOuter(0).tickPadding(6).tickSizeMinor(-this.width, 0).labelerOptions({\n      scaleType: this.model.marker.axis_y.scaleType,\n      toolMargin: this.margin,\n      limitMaxTickNumber: 6,\n      viewportLength: this.height,\n      formatter: this.model.marker.axis_y.getTickFormatter()\n    });\n\n    this.xAxis.scale(this.xScale).tickSizeInner(-this.height).tickSizeOuter(0).tickSizeMinor(-this.height, 0).tickPadding(6).labelerOptions({\n      scaleType: this.model.marker.axis_x.scaleType,\n      limitMaxTickNumber: this.activeProfile.limitMaxTickNumberX,\n      toolMargin: this.margin,\n      bump: this.activeProfile.text_padding * 2,\n      formatter: this.model.marker.axis_x.getTickFormatter()\n      //showOuter: true\n    });\n\n    this.xAxisElContainer.attr(\"width\", this.width + this.activeProfile.text_padding * 2).attr(\"height\", this.activeProfile.margin.bottom + this.height).attr(\"y\", -1).attr(\"x\", -this.activeProfile.text_padding);\n\n    this.xAxisEl.attr(\"transform\", \"translate(\" + (this.activeProfile.text_padding - 1) + \",\" + (this.height + 1) + \")\");\n\n    this.yAxisElContainer.attr(\"width\", this.activeProfile.margin.left + this.width).attr(\"height\", Math.max(0, this.height)).attr(\"x\", -this.activeProfile.margin.left);\n    this.yAxisEl.attr(\"transform\", \"translate(\" + (this.activeProfile.margin.left - 1) + \",\" + 0 + \")\");\n\n    this.yAxisEl.call(this.yAxis);\n    this.xAxisEl.call(this.xAxis);\n\n    this.yTitleEl.style(\"font-size\", infoElHeight + \"px\").attr(\"transform\", \"translate(\" + (10 - this.activeProfile.margin.left + (isRTL ? infoElHeight * 1.4 : 0)) + \", -\" + this.activeProfile.yAxisTitleBottomMargin + \")\");\n\n    var yTitleText = this.yTitleEl.select(\"text\").text(this.strings.title.Y + this.strings.unit.Y);\n    if (yTitleText.node().getBBox().width > this.width) yTitleText.text(this.strings.title.Y);\n\n    if (this.yInfoEl.select(\"svg\").node()) {\n      var titleBBox = this.yTitleEl.node().getBBox();\n      var t = utils.transform(this.yTitleEl.node());\n\n      this.yInfoEl.select(\"svg\").attr(\"width\", infoElHeight + \"px\").attr(\"height\", infoElHeight + \"px\");\n      this.yInfoEl.attr(\"transform\", \"translate(\" + (isRTL ? 10 - this.activeProfile.margin.left : titleBBox.x + t.translateX + titleBBox.width + infoElHeight * 0.4) + \",\" + (t.translateY - infoElHeight * 0.8) + \")\");\n    }\n\n    var warnBB = this.dataWarningEl.select(\"text\").node().getBBox();\n    this.dataWarningEl.select(\"svg\").attr(\"width\", warnBB.height * 0.75).attr(\"height\", warnBB.height * 0.75).attr(\"x\", -warnBB.width - warnBB.height * 1.2).attr(\"y\", -warnBB.height * 0.65);\n\n    this.dataWarningEl.attr(\"transform\", \"translate(\" + (this.width + this.margin.right * 0.85) + \",-\" + this.activeProfile.yAxisTitleBottomMargin + \")\").select(\"text\");\n\n    var xTitleText = this.xTitleEl.select(\"text\").text(this.strings.title.X + this.strings.unit.X);\n\n    this.xTitleEl.style(\"font-size\", infoElHeight + \"px\").attr(\"transform\", \"translate(\" + (this.width + this.activeProfile.text_padding + this.activeProfile.yAxisTitleBottomMargin) + \",\" + (this.height + xTitleText.node().getBBox().height * 0.72) + \")\");\n\n    if (xTitleText.node().getBBox().width > this.width - 100) xTitleText.text(this.strings.title.X);\n\n    // adjust the vertical dashed line\n    this.verticalNow.attr(\"y1\", this.yScale.range()[0]).attr(\"y2\", this.yScale.range()[1]).attr(\"x1\", 0).attr(\"x2\", 0);\n    this.projectionX.attr(\"y1\", _this.yScale.range()[0]);\n    this.projectionY.attr(\"x2\", _this.xScale.range()[0]);\n\n    if (utils.isTouchDevice()) {\n      _this.tooltip.classed(\"vzb-hidden\", true);\n      _this.verticalNow.style(\"opacity\", 1);\n      _this.projectionX.style(\"opacity\", 0);\n      _this.projectionY.style(\"opacity\", 0);\n      _this.xAxisEl.call(_this.xAxis.highlightValue(_this.time));\n      _this.yAxisEl.call(_this.yAxis.highlightValue(\"none\"));\n      _this.graph.selectAll(\".vzb-lc-entity\").each(function () {\n        d3.select(this).classed(\"vzb-dimmed\", false).classed(\"vzb-hovered\", false);\n      });\n\n      _this.hoveringNow = null;\n    }\n    var opts = {\n      rangeMax: this.xScale.range()[1],\n      mRight: longestLabelWidth - magicMargin,\n      profile: this.timeSliderProfiles[this.getLayoutProfile()]\n    };\n    this.parent.trigger(\"myEvent\", opts);\n\n    this.sizeUpdatedOnce = true;\n  },\n\n\n  /*\n   * REDRAW DATA POINTS:\n   * Here plotting happens\n   */\n  redrawDataPoints: function redrawDataPoints() {\n    var _this = this;\n    var KEYS = this.KEYS;\n    var KEY = this.KEY;\n    var dataKeys = this.dataKeys;\n    //    var values = this.values;\n\n    if (!_this.all_values) return;\n    this.model.marker.getFrame(this.time, function (values, time) {\n\n      if (!_this._frameIsValid(values)) return;\n      _this.values = values;\n      if (!_this.timeUpdatedOnce) {\n        _this.updateTime();\n      }\n      if (!_this.sizeUpdatedOnce) {\n        _this.updateSize();\n      }\n      _this.updateDoubtOpacity();\n\n      _this.entityLines.each(function (d, index) {\n        var entity = d3.select(this);\n\n        var _this$getColorsByValu4 = _this.getColorsByValue(values.color[utils.getKey(d, dataKeys.color)]),\n            color = _this$getColorsByValu4.color,\n            colorShadow = _this$getColorsByValu4.colorShadow;\n\n        //TODO: optimization is possible if getFrame would return both x and time\n        //TODO: optimization is possible if getFrame would return a limited number of points, say 1 point per screen pixel\n        //          const startTime = new Date();\n\n        var xy = _this.prev_steps.map(function (frame, i) {\n          return [frame, _this.all_values[frame] ? _this.all_values[frame].axis_y[utils.getKey(d, dataKeys.axis_y)] : null];\n        }).filter(function (d) {\n          return d[1] || d[1] === 0;\n        });\n        //          timer += new Date() - startTime;\n        // add last point\n        if (values.axis_y[utils.getKey(d, dataKeys.axis_y)]) {\n          xy.push([values.axis_x[utils.getKey(d, dataKeys.axis_x)], values.axis_y[utils.getKey(d, dataKeys.axis_y)]]);\n        }\n\n        if (xy.length > 0) {\n          _this.cached[d[KEY]] = {\n            valueX: xy[xy.length - 1][0],\n            valueY: xy[xy.length - 1][1]\n          };\n        } else {\n          delete _this.cached[d[KEY]];\n        }\n\n        // the following fixes the ugly line butts sticking out of the axis line\n        //if(x[0]!=null && x[1]!=null) xy.splice(1, 0, [(+x[0]*0.99+x[1]*0.01), y[0]]);\n        var path2 = entity.select(\".vzb-lc-line\");\n\n        if (_this.model.time.playing && _this.totalLength_1[d[KEY]] === null) {\n          _this.totalLength_1[d[KEY]] = path2.node().getTotalLength();\n        }\n        var line = _this.line(xy) || \"\";\n\n        var path1 = entity.select(\".vzb-lc-line-shadow\").style(\"stroke\", colorShadow).style(\"stroke-width\", _this.shadowWidth + \"px\").attr(\"transform\", \"translate(0, \" + (_this.shadowWidth - _this.lineWidth) + \")\").attr(\"d\", line);\n        path2\n        //.style(\"filter\", \"none\")\n        .style(\"stroke\", color).style(\"stroke-width\", _this.lineWidth + \"px\").attr(\"d\", line);\n        var totalLength = path2.node().getTotalLength();\n\n        // this section ensures the smooth transition while playing and not needed otherwise\n        if (_this.model.time.playing) {\n\n          path1.interrupt().attr(\"stroke-dasharray\", totalLength).attr(\"stroke-dashoffset\", totalLength - _this.totalLength_1[d[KEY]]).transition().delay(0).duration(_this.duration).ease(d3.easeLinear).attr(\"stroke-dashoffset\", 0);\n          path2.interrupt().attr(\"stroke-dasharray\", totalLength).attr(\"stroke-dashoffset\", totalLength - _this.totalLength_1[d[KEY]]).transition().delay(0).duration(_this.duration).ease(d3.easeLinear).attr(\"stroke-dashoffset\", 0);\n\n          _this.totalLength_1[d[KEY]] = totalLength;\n        } else {\n          //reset saved line lengths\n          _this.totalLength_1[d[KEY]] = null;\n\n          path1.attr(\"stroke-dasharray\", \"none\").attr(\"stroke-dashoffset\", \"none\");\n\n          path2.attr(\"stroke-dasharray\", \"none\").attr(\"stroke-dashoffset\", \"none\");\n        }\n      });\n\n      _this.entityLabels.each(function (d, index) {\n        var entity = d3.select(this);\n        if (_this.cached[d[KEY]]) {\n          d.valueX = _this.xScale(_this.cached[d[KEY]][\"valueX\"]);\n          d.valueY = _this.yScale(_this.cached[d[KEY]][\"valueY\"]);\n          entity.classed(\"vzb-hidden\", false).transition().duration(_this.duration).ease(d3.easeLinear).attr(\"transform\", \"translate(\" + d.valueX + \",0)\");\n\n          entity.select(\".vzb-lc-circle\").transition().duration(_this.duration).ease(d3.easeLinear).attr(\"cy\", d.valueY + 1);\n\n          if (_this.data.length < _this.ui.chart.labels.min_number_of_entities_when_values_hide * KEYS.length) {\n            var label = _this._getLabelText(_this.values, _this.labelNames, d);\n            var value = _this.yAxis.tickFormat()(_this.cached[d[KEY]][\"valueY\"]);\n            var name = label.length < 13 ? label : label.substring(0, 10) + \"...\"; //\"…\";\n\n            entity.selectAll(\".vzb-lc-labelname\").text(name + \" \" + value);\n          }\n\n          entity.select(\".vzb-lc-label\").transition().duration(_this.duration).ease(d3.easeLinear).attr(\"transform\", \"translate(0,\" + d.valueY + \")\");\n        } else {\n          entity.classed(\"vzb-hidden\", true);\n        }\n      });\n      _this.verticalNow.transition().duration(_this.duration).ease(d3.easeLinear).attr(\"transform\", \"translate(\" + _this.xScale(d3.min([_this.model.marker.axis_x.getZoomedMax(), _this.time])) + \",0)\");\n\n      if (!_this.hoveringNow && _this.time - _this.model.time.start !== 0) {\n        if (!_this.ui.chart.hideXAxisValue) _this.xAxisEl.call(_this.xAxis.highlightTransDuration(_this.duration).highlightValue(_this.time));\n        _this.verticalNow.style(\"opacity\", 1);\n      } else {\n        _this.verticalNow.style(\"opacity\", 0);\n      }\n\n      // Call flush() after any zero-duration transitions to synchronously flush the timer queue\n      // and thus make transition instantaneous. See https://github.com/mbostock/d3/issues/1951\n      if (_this.duration == 0) {\n        d3.timerFlush();\n      }\n\n      // cancel previously queued simulation if we just ordered a new one\n      // then order a new collision resolving\n      clearTimeout(_this.collisionTimeout);\n      _this.collisionTimeout = setTimeout(function () {\n        _this.entityLabels.call(_this.collisionResolver.time(_this.xScale(_this.time)));\n      }, _this.model.time.delayAnimations * 1.5);\n    });\n  },\n  entityMousemove: function entityMousemove(me, index, context, closestToMouse) {\n    var _this = context;\n    var KEY = _this.KEY;\n    var values = _this.values;\n\n    var mouse = d3.mouse(_this.element.node()).map(function (d) {\n      return parseInt(d);\n    });\n\n    var resolvedTime = _this.xScale.invert(mouse[0] - _this.margin.left);\n    if (_this.time - resolvedTime < 0) {\n      resolvedTime = _this.time;\n    } else if (resolvedTime < this.model.time[\"start\"]) {\n      resolvedTime = this.model.time[\"start\"];\n    }\n    var resolvedValue = void 0;\n\n    var mousePos = mouse[1] - _this.margin.top;\n\n    if (!utils.isDate(resolvedTime)) resolvedTime = this.model.time.parse(resolvedTime);\n\n    this.model.marker.getFrame(resolvedTime, function (data) {\n      if (!_this._frameIsValid(data)) return;\n      //const nearestKey = _this.getNearestKey(_this.yScale.invert(mousePos), data.axis_y);\n      var nearestKey = _this.getNearestKey(mousePos, data.axis_y, _this.yScale.bind(_this));\n      resolvedValue = data.axis_y[nearestKey];\n      me = _this.dataHash[nearestKey];\n      if (!_this.model.marker.isHighlighted(me)) {\n        _this.model.marker.clearHighlighted();\n        _this.model.marker.highlightMarker(me);\n      }\n      _this.hoveringNow = me;\n\n      if (utils.isNaN(resolvedValue)) return;\n\n      var scaledTime = _this.xScale(resolvedTime);\n      var scaledValue = _this.yScale(resolvedValue);\n\n      if (_this.ui.chart.whenHovering.showTooltip) {\n        //position tooltip\n        _this.tooltip\n        //.style(\"right\", (_this.width - scaledTime + _this.margin.right ) + \"px\")\n        .style(\"left\", scaledTime + _this.margin.left + \"px\").style(\"bottom\", _this.height - scaledValue + _this.margin.bottom + \"px\").text(_this.yAxis.tickFormat()(resolvedValue)).classed(\"vzb-hidden\", false);\n      }\n\n      // bring the projection lines to the hovering point\n      if (_this.ui.chart.whenHovering.hideVerticalNow) {\n        _this.verticalNow.style(\"opacity\", 0);\n      }\n\n      if (_this.ui.chart.whenHovering.showProjectionLineX) {\n        _this.projectionX.style(\"opacity\", 1).attr(\"y2\", scaledValue).attr(\"x1\", scaledTime).attr(\"x2\", scaledTime);\n      }\n      if (_this.ui.chart.whenHovering.showProjectionLineY) {\n        _this.projectionY.style(\"opacity\", 1).attr(\"y1\", scaledValue).attr(\"y2\", scaledValue).attr(\"x1\", scaledTime);\n      }\n\n      if (_this.ui.chart.whenHovering.higlightValueX) _this.xAxisEl.call(_this.xAxis.highlightValue(resolvedTime).highlightTransDuration(0));\n\n      if (_this.ui.chart.whenHovering.higlightValueY) _this.yAxisEl.call(_this.yAxis.highlightValue(resolvedValue).highlightTransDuration(0));\n\n      clearTimeout(_this.unhoverTimeout);\n    });\n  },\n  entityMouseout: function entityMouseout(me, index, context) {\n    var _this = context;\n    if (d3.event.relatedTarget && d3.select(d3.event.relatedTarget).classed(\"vzb-tooltip\")) return;\n\n    // hide and show things like it was before hovering\n    _this.unhoverTimeout = setTimeout(function () {\n      _this.tooltip.classed(\"vzb-hidden\", true);\n      _this.verticalNow.style(\"opacity\", 1);\n      _this.projectionX.style(\"opacity\", 0);\n      _this.projectionY.style(\"opacity\", 0);\n      _this.xAxisEl.call(_this.xAxis.highlightValue(_this.time));\n      _this.yAxisEl.call(_this.yAxis.highlightValue(\"none\"));\n\n      _this.model.marker.clearHighlighted();\n\n      _this.hoveringNow = null;\n    }, 300);\n  },\n\n\n  /*\n   * Highlights all hovered lines\n   */\n  highlightLines: function highlightLines() {\n    var _this = this;\n    var KEYS = this.KEYS;\n    var KEY = this.KEY;\n    var OPACITY_HIGHLT = 1.0;\n    var OPACITY_HIGHLT_DIM = 0.3;\n    var OPACITY_SELECT = 1.0;\n    var OPACITY_REGULAR = this.model.marker.opacityRegular;\n    var OPACITY_SELECT_DIM = this.model.marker.opacitySelectDim;\n\n    var someHighlighted = this.model.marker.highlight.length > 0;\n    this.someSelected = this.model.marker.select.length > 0;\n\n    // when pointer events need update...\n\n    this.nonSelectedOpacityZero = _this.model.marker.opacitySelectDim < 0.01;\n    var selected = {};\n    _this.model.marker.getSelected().map(function (d) {\n      selected[utils.getKey(d, KEYS)] = true;\n    });\n    //    const startTime = new Date();\n    this.entityLines.style(\"opacity\", function (d) {\n      if (_this.model.marker.isHighlighted(d)) return OPACITY_HIGHLT;\n      if (_this.someSelected) {\n        return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n      }\n      if (someHighlighted) return OPACITY_HIGHLT_DIM;\n      return OPACITY_REGULAR;\n    });\n    this.entityLabels.style(\"opacity\", function (d) {\n      if (_this.model.marker.isHighlighted(d)) {\n        d.sortValue = 1;\n        return OPACITY_HIGHLT;\n      } else {\n        d.sortValue = 0;\n      }\n      if (_this.someSelected) {\n        return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n      }\n      if (someHighlighted) return OPACITY_HIGHLT_DIM;\n      return OPACITY_REGULAR;\n    }).attr(\"pointer-events\", function (d) {\n      if (!_this.someSelected || !_this.nonSelectedOpacityZero || selected[d[KEY]]) {\n        d.hidden = false;\n        return \"visible\";\n      } else {\n        d.hidden = true;\n        return \"none\";\n      }\n    }).sort(function (x, y) {\n      return d3.ascending(x.sortValue, y.sortValue);\n    });\n    /*\n    //    const startTime = new Date();\n    //    console.log(new Date() - startTime);\n        this.graph.selectAll(\".vzb-lc-entity\").each(function() {\n          d3.select(this)\n            .style(\"opacity\", d => {\n              if (_this.model.marker.isHighlighted(d)) return OPACITY_HIGHLT;\n              if (_this.someSelected) {\n                return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n              }\n              if (someHighlighted) return OPACITY_HIGHLT_DIM;\n              return OPACITY_REGULAR;\n            })\n        });\n    */\n  },\n  zoomToMaxMin: function zoomToMaxMin() {\n    if (this.model.marker.axis_x.getZoomedMin() != null && this.model.marker.axis_x.getZoomedMax() != null) {\n      this.xScale.domain([this.model.marker.axis_x.getZoomedMin(), this.model.marker.axis_x.getZoomedMax()]);\n      this.xAxisEl.call(this.xAxis);\n    }\n\n    if (this.model.marker.axis_y.getZoomedMin() != null && this.model.marker.axis_y.getZoomedMax() != null) {\n      if ((this.model.marker.axis_y.getZoomedMin() <= 0 || this.model.marker.axis_y.getZoomedMax() <= 0) && this.model.marker.axis_y.scaleType == \"log\") {\n        this.yScale = d3.scaleGenericlog().domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()]).range(this.yScale.range());\n        this.model.marker.axis_y.scale = d3.scaleGenericlog().domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()]).range(this.yScale.range());\n        this.yScale = this.model.marker.axis_y.scale;\n      } else {\n        this.yScale.domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()]);\n      }\n      this.yAxisEl.call(this.yAxis);\n    }\n  },\n\n\n  /**\n   * Returns key from obj which value has the smallest difference with val\n   */\n  getNearestKey: function getNearestKey(val, obj, fn) {\n    //const startTime = new Date();\n    var KEYS = this.KEYS;\n    var keys = Object.keys(obj);\n\n    if (this.someSelected && this.nonSelectedOpacityZero) {\n      keys = this.model.marker.select.map(function (keyObj) {\n        return utils.getKey(keyObj, KEYS);\n      });\n    }\n    var resKey = keys[0];\n    for (var i = 1; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (Math.abs((fn ? fn(obj[key]) : obj[key]) - val) < Math.abs((fn ? fn(obj[resKey]) : obj[resKey]) - val)) {\n        resKey = key;\n      }\n    }\n    //console.log(new Date() - startTime);\n    return resKey;\n  },\n  _getLabelText: function _getLabelText(values, labelNames, d) {\n    return this.KEYS.map(function (key) {\n      return values[labelNames[key]] ? values[labelNames[key]][d[key]] : d[key];\n    }).join(\", \");\n  }\n});\n\nexports.default = LCComponent;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<!-- LineChart Component -->\\n<div class=\\\"vzb-linechart\\\">\\n    <svg class=\\\"vzb-linechart-svg\\\">\\n        <g class=\\\"vzb-lc-graph\\\">\\n\\n            <svg class=\\\"vzb-lc-axis-x\\\"><g></g></svg>\\n            <svg class=\\\"vzb-lc-axis-y\\\"><g></g></svg>\\n            <text class=\\\"vzb-lc-axis-x-value\\\"></text>\\n            <text class=\\\"vzb-lc-axis-y-value\\\"></text>\\n            <svg class=\\\"vzb-lc-lines-crop\\\">\\n                <svg class=\\\"vzb-lc-lines\\\"></svg>\\n                <line class=\\\"vzb-lc-projection-x\\\"></line>\\n                <line class=\\\"vzb-lc-projection-y\\\"></line>\\n            </svg>\\n            <svg class=\\\"vzb-lc-labels-crop\\\">\\n                <g class=\\\"vzb-lc-labels\\\">\\n                    <line class=\\\"vzb-lc-vertical-now\\\"></line>\\n                </g>\\n            </svg>\\n\\n            <g class=\\\"vzb-lc-axis-y-title\\\"></g>\\n            <g class=\\\"vzb-lc-axis-x-title\\\"></g>\\n            <g class=\\\"vzb-lc-axis-y-info\\\"></g>\\n\\n            <g class=\\\"vzb-data-warning vzb-noexport\\\">\\n                <svg></svg>\\n                <text></text>\\n            </g>\\n\\n\\n            <!--filter id=\\\"vzb-lc-filter-dropshadow\\\"> \\n              <feOffset result=\\\"offOut\\\" in=\\\"SourceGraphic\\\" dx=\\\"0\\\" dy=\\\"2\\\" />\\n              <feColorMatrix result = \\\"matrixOut\\\" in = \\\"offOut\\\" type = \\\"matrix\\\"\\n                             values = \\\"0.3 .0 .0 .0 .0\\n                                       .0 .3 .0 .0 .0\\n                                       .0 .0 .3 .0 .0\\n                                       1.0 1.0 1.0 1.0 .0\\\"/>\\n              <feGaussianBlur result=\\\"blurOut\\\" in=\\\"matrixOut\\\" stdDeviation=\\\"0.8\\\" />\\n              <feBlend in=\\\"SourceGraphic\\\" in2=\\\"blurOut\\\" mode=\\\"normal\\\" />\\n            </filter-->\\n\\n        </g>\\n    </svg>\\n    <div class=\\\"vzb-tooltip vzb-hidden\\\"></div>\\n</div>\\n\";\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(0);\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// linechart.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6e66634006a274313d8","import \"./styles.scss\";\nimport component from \"./component\";\n\nconst VERSION_INFO = { version: __VERSION, build: __BUILD };\n\n// LINE CHART TOOL\nconst LineChart = Vizabi.Tool.extend(\"LineChart\", {\n  /**\n   * Initialized the tool\n   * @param {Object} placeholder Placeholder element for the tool\n   * @param {Object} external_model Model as given by the external page\n   */\n  init(placeholder, external_model) {\n\n    this.name = \"linechart\";\n\n    this.components = [{\n      component,\n      placeholder: \".vzb-tool-viz\",\n      model: [\"state.time\", \"state.marker\", \"locale\", \"ui\"] //pass models to component\n    }, {\n      component: Vizabi.Component.get(\"timeslider\"),\n      placeholder: \".vzb-tool-timeslider\",\n      model: [\"state.time\", \"state.marker\", \"ui\"],\n      ui: { show_value_when_drag_play: true, axis_aligned: false }\n    }, {\n      component: Vizabi.Component.get(\"dialogs\"),\n      placeholder: \".vzb-tool-dialogs\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"buttonlist\"),\n      placeholder: \".vzb-tool-buttonlist\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"treemenu\"),\n      placeholder: \".vzb-tool-treemenu\",\n      model: [\"state.marker\", \"state.marker_tags\", \"state.time\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datawarning\"),\n      placeholder: \".vzb-tool-datawarning\",\n      model: [\"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datanotes\"),\n      placeholder: \".vzb-tool-datanotes\",\n      model: [\"state.marker\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"steppedspeedslider\"),\n      placeholder: \".vzb-tool-stepped-speed-slider\",\n      model: [\"state.time\", \"locale\"]\n    }];\n\n    this._super(placeholder, external_model);\n  },\n\n  default_model: {\n    \"state\": {\n      \"time\": {\n        \"autoconfig\": {\n          \"type\": \"time\"\n        }\n      },\n      \"entities\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"entities_colorlegend\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      entities_tags: {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"includeOnlyIDs\": [\"tag\"]\n        }\n      },\n      marker_tags: {\n        space: [\"entities_tags\"],\n        label: {\n          use: \"property\",\n        },\n        hook_parent: {}\n      },\n      \"entities_allpossible\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"marker_allpossible\": {\n        \"space\": [\"entities_allpossible\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        }\n      },\n      \"marker\": {\n        \"space\": [\"entities\", \"time\"],\n        \"axis_x\": {\n          \"use\": \"indicator\",\n          \"allow\": { scales: [\"time\"] },\n          \"autoconfig\": {\n            \"index\": 0,\n            \"type\": \"time\"\n          }\n        },\n        \"axis_y\": {\n          \"use\": \"indicator\",\n          \"allow\": { scales: [\"linear\", \"log\"] },\n          \"autoconfig\": {\n            \"type\": \"measure\"\n          }\n        },\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        },\n        \"color\": {\n          \"syncModels\": [\"marker_colorlegend\"],\n          \"autoconfig\": {}\n        }\n      },\n      \"marker_colorlegend\": {\n        \"space\": [\"entities_colorlegend\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"which\": \"name\"\n        },\n        \"hook_rank\": {\n          \"use\": \"property\",\n          \"which\": \"rank\"\n        },\n        \"hook_geoshape\": {\n          \"use\": \"property\",\n          \"which\": \"shape_lores_svg\"\n        }\n      }\n    },\n    locale: { },\n    \"ui\": {\n      \"chart\": {\n        \"labels\": {\n          \"min_number_of_entities_when_values_hide\": 2 //values hide when showing 2 entities or more\n        },\n        \"whenHovering\": {\n          \"hideVerticalNow\": false,\n          \"showProjectionLineX\": true,\n          \"showProjectionLineY\": true,\n          \"higlightValueX\": true,\n          \"higlightValueY\": true,\n          \"showTooltip\": false\n        }\n      },\n      datawarning: {\n        doubtDomain: [],\n        doubtRange: []\n      },\n      \"buttons\": [\"colors\", \"find\", \"show\", \"moreoptions\", \"fullscreen\", \"presentation\"],\n      \"dialogs\": {\n        \"popup\": [\"colors\", \"find\", \"show\", \"moreoptions\"],\n        \"sidebar\": [\"colors\", \"show\"],\n        \"moreoptions\": [\"opacity\", \"speed\", \"axes\", \"colors\", \"presentation\", \"about\"]\n      },\n      \"presentation\": false\n    }\n  },\n\n  versionInfo: VERSION_INFO\n});\n\nexport default LineChart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const {\n  utils,\n  Component,\n  helpers: {\n    \"d3.axisWithLabelPicker\": axisSmart,\n    \"d3.collisionResolver\": collisionResolver \n  },\n  iconset: {\n    warn: iconWarn,\n    question: iconQuestion\n  }\n} = Vizabi;\n\n// LINE CHART COMPONENT\nconst LCComponent = Component.extend(\"linechart\", {\n\n  init(config, context) {\n    const _this = this;\n    this.name = \"linechart\";\n    this.template = require(\"./template.html\");\n\n    //define expected models for this component\n    this.model_expects = [{\n      name: \"time\",\n      type: \"time\"\n    }, {\n      name: \"marker\",\n      type: \"marker\"\n    }, {\n      name: \"locale\",\n      type: \"locale\"\n    }, {\n      name: \"ui\",\n      type: \"ui\"\n    }];\n\n\n    this.model_binds = {\n      \"change:time.value\": function() {\n        if (!_this._readyOnce) return;\n        _this.model.marker.getFrame(_this.model.time.value, (frame, time) => {\n          if (!_this._frameIsValid(frame)) return utils.warn(\"change:time.value: empty data received from marker.getFrame(). doing nothing\");\n          _this.frameChanged(frame, time);\n        });\n      },\n      \"change:time.playing\": function() {\n        // hide tooltip on touch devices when playing\n        if (_this.model.time.playing && utils.isTouchDevice() && !_this.tooltip.classed(\"vzb-hidden\")) _this.tooltip.classed(\"vzb-hidden\", true);\n      },\n      \"change:time.start\": function() {\n        if (!_this._readyOnce || !_this.all_values || !_this.values) return;\n        _this.updateIndicators();\n        _this.updateShow();\n        _this.zoomToMaxMin();\n        _this.updateSize();\n        _this.redrawDataPoints();\n        _this.highlightLines();        \n      },\n      \"change:time.end\": function() {\n        if (!_this._readyOnce || !_this.all_values || !_this.values) return;\n        _this.updateIndicators();\n        _this.updateShow();\n        _this.zoomToMaxMin();\n        _this.updateSize();\n        _this.redrawDataPoints();\n        _this.highlightLines();        \n      },\n      \"change:marker\": function(evt, path) {\n        if (!_this._readyOnce) return;\n        if (path.indexOf(\"domainMin\") > -1 || path.indexOf(\"domainMax\") > -1 ||\n          path.indexOf(\"zoomedMin\") > -1 || path.indexOf(\"zoomedMax\") > -1) {\n          if (!_this.yScale || !_this.xScale) return; //abort if building of the scale is in progress\n          if (path.indexOf(\"axis_x\") > -1) {\n            const startOrigin = _this.model.time.formatDate(_this.model.marker.axis_x.getZoomedMin());\n            const endOrigin = _this.model.time.formatDate(_this.model.marker.axis_x.getZoomedMax());\n            _this.model.time.set({\n              startOrigin: startOrigin,\n              endOrigin: endOrigin\n            });\n            return;      \n          }\n          if (!_this.all_values || !_this.values) return;\n          _this.updateIndicators();\n          _this.updateShow();\n          _this.zoomToMaxMin();\n          _this.updateSize();\n          _this.updateTime();\n          _this.redrawDataPoints();\n          _this.highlightLines();          \n          return;\n        }\n        if (path.indexOf(\"scaleType\") > -1) {\n          if (!_this.all_values || !_this.values) return;\n          _this.updateIndicators();\n          _this.updateShow();\n          _this.zoomToMaxMin();\n          _this.updateSize();\n          _this.redrawDataPoints();\n          _this.highlightLines();          \n        }\n      },\n      \"change:marker.highlight\": function() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.select\": function() {\n        if (!_this._readyOnce) return;\n        _this.updateDoubtOpacity();\n        _this.highlightLines();\n      },\n      \"change:marker.opacitySelectDim\": function() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.opacityRegular\": function() {\n        if (!_this._readyOnce) return;\n        _this.highlightLines();\n      },\n      \"change:marker.color.palette\": function() {\n        if (!_this._readyOnce) return;\n        _this.updateColors();\n      }\n    };\n\n    this._super(config, context);\n\n    this.xScale = null;\n    this.yScale = null;\n\n    this.rangeXRatio = 1;\n    this.rangeXShift = 0;\n\n    this.rangeYRatio = 1;\n    this.rangeYShift = 0;\n    this.lineWidthScale = d3.scaleLinear().domain([0, 20]).range([7, 1]).clamp(true);\n    this.xAxis = axisSmart(\"bottom\");\n    this.yAxis = axisSmart(\"left\");\n\n    this.COLOR_BLACKISH = \"#333\";\n    this.COLOR_WHITEISH = \"#fdfdfd\";\n    this.COLOR_WHITEISH_SHADE = \"#555\";\n\n    this.isDataPreprocessed = false;\n    this.timeUpdatedOnce = false;\n    this.sizeUpdatedOnce = false;\n\n    this.getNearestKey = utils.memoize(this.getNearestKey);\n  },\n\n  /*\n   * domReady:\n   * Executed after template is loaded\n   * Ideally, it contains instantiations related to template\n   */\n  readyOnce() {\n    const _this = this;\n\n    this.element = d3.select(this.element);\n    this.graph = this.element.select(\".vzb-lc-graph\");\n\n    this.yAxisElContainer = this.graph.select(\".vzb-lc-axis-y\");\n    this.yAxisEl = this.yAxisElContainer.select(\"g\");\n\n    this.xAxisElContainer = this.graph.select(\".vzb-lc-axis-x\");\n    this.xAxisEl = this.xAxisElContainer.select(\"g\");\n\n    this.xTitleEl = this.graph.select(\".vzb-lc-axis-x-title\");\n    this.yTitleEl = this.graph.select(\".vzb-lc-axis-y-title\");\n    this.yInfoEl = this.graph.select(\".vzb-lc-axis-y-info\");\n    this.linesContainerCrop = this.graph.select(\".vzb-lc-lines-crop\");\n    this.linesContainer = this.graph.select(\".vzb-lc-lines\");\n    this.labelsContainerCrop = this.graph.select(\".vzb-lc-labels-crop\");\n    this.labelsContainer = this.graph.select(\".vzb-lc-labels\");\n\n    this.dataWarningEl = this.graph.select(\".vzb-data-warning\");\n\n    this.verticalNow = this.labelsContainer.select(\".vzb-lc-vertical-now\");\n    this.tooltip = this.element.select(\".vzb-tooltip\");\n    //            this.filterDropshadowEl = this.element.select('#vzb-lc-filter-dropshadow');\n    this.projectionX = this.graph.select(\".vzb-lc-projection-x\");\n    this.projectionY = this.graph.select(\".vzb-lc-projection-y\");\n\n    this.entityLabels = this.labelsContainer.selectAll(\".vzb-lc-entity\");\n    this.entityLines = this.linesContainer.selectAll(\".vzb-lc-entity\");\n    this.totalLength_1 = {};\n\n    this.TIMEDIM = this.model.time.getDimension();\n    this.KEYS = utils.unique(this.model.marker._getAllDimensions({ exceptType: \"time\" }));\n    this.KEY = this.KEYS.join(\",\");\n    this.dataKeys = this.model.marker.getDataKeysPerHook();\n    this.labelNames = this.model.marker.getLabelHookNames();\n\n    this.collisionResolver = collisionResolver()\n      .selector(\".vzb-lc-label\")\n      .value(\"valueY\")\n      .filter(function(d, time){\n        return (d.valueX - time === 0 && !d.hidden)\n      });\n    \n    //component events\n\n    const conceptPropsY = this.model.marker.axis_y.getConceptprops();\n    utils.setIcon(this.yInfoEl, iconQuestion)\n      .select(\"svg\").attr(\"width\", \"0px\").attr(\"height\", \"0px\")\n      .style('opacity', Number(Boolean(conceptPropsY.description || conceptPropsY.sourceLink)));\n\n    this.yInfoEl.on(\"click\", () => {\n      _this.parent.findChildByName(\"gapminder-datanotes\").pin();\n    });\n    this.yInfoEl.on(\"mouseover\", function() {\n      const rect = this.getBBox();\n      const coord = utils.makeAbsoluteContext(this, this.farthestViewportElement)(rect.x - 10, rect.y + rect.height + 10);\n      _this.parent.findChildByName(\"gapminder-datanotes\").setHook(\"axis_y\").show().setPos(coord.x, coord.y);\n    });\n    this.yInfoEl.on(\"mouseout\", () => {\n      _this.parent.findChildByName(\"gapminder-datanotes\").hide();\n    });\n\n    this.wScale = d3.scaleLinear()\n      .domain(this.model.ui.datawarning.doubtDomain)\n      .range(this.model.ui.datawarning.doubtRange);\n\n    this.on(\"resize\", () => {\n      //return if updatesize exists with error\n      if (_this.updateSize()) return;\n      _this.updateTime();\n      _this.redrawDataPoints();\n    });\n    this.graph.on(\"click\", () => {\n      if (this.model.marker.highlight.length == 1) {\n        _this.model.marker.selectMarker(this.model.marker.highlight[0]);\n      }\n    });\n  },\n\n  ready() {\n    const _this = this;\n    this.KEYS = utils.unique(this.model.marker._getAllDimensions({ exceptType: \"time\" }));\n    this.KEY = this.KEYS.join(\",\");\n    this.dataKeys = this.model.marker.getDataKeysPerHook();\n    this.labelNames = this.model.marker.getLabelHookNames();\n\n    this.all_steps = this.model.time.getAllSteps();\n    this.all_values = this.values = null;\n    this.updateTime();\n    this.updateUIStrings();\n    this.updateIndicators();\n      //this.updateShow();\n    this.entityLines.remove();\n    this.entityLabels.remove();\n    //null means we need to calculate all frames before we get to the callback\n    this.model.marker.getFrame(null, allValues => {\n      _this.all_values = allValues;\n      _this.model.marker.getFrame(_this.model.time.value, values => {\n        if (!_this._frameIsValid(values)) return;\n        _this.values = values;\n        _this.updateShow();\n        if(_this.updateSize()) return;\n        _this.updateDoubtOpacity();\n        _this.zoomToMaxMin();\n        _this.redrawDataPoints();\n        _this.highlightLines();\n        _this.linesContainerCrop\n          .on(\"mousemove\", _this.entityMousemove.bind(_this, null, null, _this))\n          .on(\"mouseleave\", _this.entityMouseout.bind(_this, null, null, _this));\n\n      });\n    });\n  },\n\n  _frameIsValid(frame) {\n    return !(!frame\n    || Object.keys(frame.axis_y).length === 0\n    || Object.keys(frame.axis_x).length === 0\n    || Object.keys(frame.color).length === 0);\n  },\n\n  frameChanged(frame, time) {\n//    if (time.toString() != this.model.time.value.toString()) return; // frame is outdated\n    this.frame = frame;\n    this.updateTime();\n    if (!this.all_values) return;\n    this.redrawDataPoints();\n  },\n\n  updateUIStrings() {\n    const _this = this;\n    const conceptPropsY = _this.model.marker.axis_y.getConceptprops();\n    const conceptPropsX = _this.model.marker.axis_x.getConceptprops();\n    const conceptPropsC = _this.model.marker.color.getConceptprops();\n    this.translator = this.model.locale.getTFunction();\n\n    this.strings = {\n      title: {\n        Y: conceptPropsY.name,\n        X: conceptPropsX.name,\n        C: conceptPropsC.name\n      },\n      unit: {\n        Y: conceptPropsY.unit || \"\",\n        X: conceptPropsX.unit || \"\",\n        C: conceptPropsC.unit || \"\"\n      }\n    };\n\n    if (this.strings.unit.Y === \"unit/\" + this.model.marker.axis_y.which) this.strings.unit.Y = \"\";\n    if (this.strings.unit.X === \"unit/\" + this.model.marker.axis_x.which) this.strings.unit.X = \"\";\n    if (this.strings.unit.C === \"unit/\" + this.model.marker.color.which) this.strings.unit.C = \"\";\n\n    if (this.strings.unit.Y) this.strings.unit.Y = \", \" + this.strings.unit.Y;\n    if (this.strings.unit.X) this.strings.unit.X = \", \" + this.strings.unit.X;\n    if (this.strings.unit.C) this.strings.unit.C = \", \" + this.strings.unit.C;\n\n    utils.setIcon(this.dataWarningEl, iconWarn).select(\"svg\").attr(\"width\", \"0px\").attr(\"height\", \"0px\");\n    this.dataWarningEl.append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .text(this.translator(\"hints/dataWarning\"));\n\n    this.dataWarningEl\n      .on(\"click\", () => {\n        _this.parent.findChildByName(\"gapminder-datawarning\").toggle();\n      })\n      .on(\"mouseover\", () => {\n        _this.updateDoubtOpacity(1);\n      })\n      .on(\"mouseout\", () => {\n        _this.updateDoubtOpacity();\n      });\n\n    let xTitle = this.xTitleEl.selectAll(\"text\").data([0]);\n    xTitle = xTitle.enter().append(\"text\").merge(xTitle);\n\n    let yTitle = this.yTitleEl.selectAll(\"text\").data([0]);\n    yTitle = yTitle.enter().append(\"text\").merge(yTitle);\n    yTitle\n      .on(\"click\", () => {\n        _this.parent\n          .findChildByName(\"gapminder-treemenu\")\n          .markerID(\"axis_y\")\n          .alignX(\"left\")\n          .alignY(\"top\")\n          .updateView()\n          .toggle();\n      });\n\n  },\n\n  updateDoubtOpacity(opacity) {\n    if (opacity == null) opacity = this.wScale(+this.time.getUTCFullYear().toString());\n    if (this.someSelected) opacity = 1;\n    this.dataWarningEl.style(\"opacity\", opacity);\n  },\n\n  /*\n   * UPDATE INDICATORS\n   */\n  updateIndicators() {\n    const _this = this;\n    const KEY = this.KEY;\n\n    //scales\n    this.yScale = this.model.marker.axis_y.getScale();\n    if (!this.splash) {\n      const limits = this.model.marker.axis_y.getLimits(this.model.marker.axis_y.which);\n      this.yScale.domain([limits.min, limits.max]);\n    }\n    this.xScale = this.model.marker.axis_x.getScale();\n    this.cScale = this.model.marker.color.getScale();\n    this.yAxis.tickFormat(this.model.marker.axis_y.getTickFormatter());\n    this.xAxis.tickFormat(this.model.marker.axis_x.getTickFormatter());\n\n    this.collisionResolver.scale(this.yScale)\n      .KEY(KEY);  \n  },\n\n  /*\n   * UPDATE SHOW:\n   * Ideally should only update when show parameters change or data changes\n   */\n  updateShow() {\n    const _this = this;\n    const KEYS = this.KEYS;\n    const KEY = this.KEY;\n    const dataKeys = this.dataKeys;\n\n    this.cached = {};\n\n    this.dataHash = {};\n    this.data = this.model.marker.getKeys().map(entity => {\n      entity[KEY] = utils.getKey(entity, KEYS);\n      this.dataHash[entity[KEY]] = entity;\n      return entity;\n    });\n    this.linesContainer.selectAll(\".vzb-lc-entity\").remove();\n    this.entityLines = this.linesContainer.selectAll(\".vzb-lc-entity\").data(this.data);\n\n    this.lineWidth = this.lineWidthScale(this.data.length);\n    if (this.lineWidth >= 2) {\n      this.shadowWidth = this.lineWidth * 1.3;\n    } else {\n      this.shadowWidth = null;\n    }\n    this.labelsContainer.classed(\"small\", !this.shadowWidth);\n    this.entityLines = this.entityLines.enter().append(\"g\")\n      .attr(\"class\", d => \"vzb-lc-entity vzb-lc-entity-\" + d[KEY])\n      .each(function(d, index) {\n        const entity = d3.select(this);\n        if (_this.shadowWidth) {\n          entity.append(\"path\")\n            .attr(\"class\", \"vzb-lc-line-shadow\");\n        } else {\n          \n        }\n\n        entity.append(\"path\")\n          .attr(\"class\", \"vzb-lc-line\");\n\n      })\n      .merge(this.entityLines);\n    this.labelsContainer.selectAll(\".vzb-lc-entity\").remove();\n    this.entityLabels = this.labelsContainer.selectAll(\".vzb-lc-entity\").data(this.data);\n    this.entityLabels = this.entityLabels.enter().append(\"g\")\n      .attr(\"class\", \"vzb-lc-entity\")\n      .on(\"mouseover\", d => {\n        _this.model.marker.highlightMarker(d);\n      })\n      .on(\"mouseout\", d => {\n        _this.model.marker.clearHighlighted();\n      })\n      .each(function(d, index) {\n        const entity = d3.select(this);\n\n        entity.append(\"circle\")\n          .attr(\"class\", \"vzb-lc-circle\")\n          .attr(\"cx\", 0);\n\n        const labelGroup = entity.append(\"g\").attr(\"class\", \"vzb-lc-label\");\n\n        labelGroup.append(\"text\")\n          .attr(\"class\", \"vzb-lc-labelname vzb-lc-labelstroke\")\n          .attr(\"dy\", \".35em\");\n\n        labelGroup.append(\"text\")\n          .attr(\"class\", \"vzb-lc-labelname vzb-lc-labelfill\")\n          .attr(\"dy\", \".35em\");\n\n        labelGroup.append(\"text\")\n          .attr(\"class\", \"vzb-lc-label-value\")\n          .attr(\"dy\", \"1.6em\");\n      })\n      .merge(this.entityLabels);\n\n    if (this.all_values && this.values) {\n      this.entityLabels.each(function(d, index) {\n        const entity = d3.select(this);\n        const {color, colorShadow} = _this.getColorsByValue(_this.values.color[utils.getKey(d, dataKeys.color)]);\n        \n        const label = _this._getLabelText(_this.values, _this.labelNames, d);\n        const value = _this.yAxis.tickFormat()(_this.values.axis_y[utils.getKey(d, dataKeys.axis_y)]);\n        const name = label.length < 13 ? label : label.substring(0, 10) + \"...\";//\"…\";\n        const valueHideLimit = _this.ui.chart.labels.min_number_of_entities_when_values_hide;\n\n        entity.select(\"circle\").style(\"fill\", color);\n        entity.selectAll(\".vzb-lc-labelname\")\n          .text(name + \" \" + (_this.data.length < valueHideLimit ? value : \"\"))\n        entity.select(\".vzb-lc-labelfill\")\n          .style(\"fill\", colorShadow)\n        entity.append(\"title\").text(label + \" \" + value);\n\n        entity.select(\".vzb-lc-label-value\")\n          .style(\"fill\", colorShadow);\n\n      });\n    }\n\n    //line template\n    this.line = d3.line()\n    //see https://bl.ocks.org/mbostock/4342190\n    //\"monotone\" can also work. \"basis\" would skip the points on the sharp turns. \"linear\" is ugly\n      .curve(d3.curveMonotoneX)\n      .x(d => _this.xScale(d[0]))\n      .y(d => _this.yScale(d[1]));\n  },\n\n  getColorsByValue(colorValue) {\n    return { \n      color: colorValue != null ? this.cScale(colorValue) : this.COLOR_WHITEISH,\n      colorShadow: colorValue != null ? this.model.marker.color.getColorShade({\n          colorID: colorValue,\n          shadeID: \"shade\"\n        }) : this.COLOR_WHITEISH_SHADE\n    }\n  },\n\n  updateColors() {\n    const _this = this;        \n    const dataKeys = this.dataKeys;\n    const valuesColor = this.values.color;\n    \n    this.cScale = this.model.marker.color.getScale();\n    \n    this.entityLabels.each(function(d, index) {\n      const entity = d3.select(this);\n      const {color, colorShadow} = _this.getColorsByValue(valuesColor[utils.getKey(d, dataKeys.color)]);\n\n      entity.select(\"circle\").style(\"fill\", color);\n      entity.select(\".vzb-lc-labelfill\")\n        .style(\"fill\", colorShadow)\n      entity.select(\".vzb-lc-label-value\")\n        .style(\"fill\", colorShadow);\n    });\n\n    this.entityLines.each(function(d, index) {\n      const entity = d3.select(this);\n      const {color, colorShadow} = _this.getColorsByValue(valuesColor[utils.getKey(d, dataKeys.color)]);\n      \n      entity.select(\".vzb-lc-line\").style(\"stroke\", color);\n      entity.select(\".vzb-lc-line-shadow\").style(\"stroke\", colorShadow);\n    });\n  },\n  /*\n   * UPDATE TIME:\n   * Ideally should only update when time or data changes\n   */\n  updateTime() {\n    const _this = this;\n    const KEY = this.KEY;\n    const time_1 = (this.time === null) ? this.model.time.value : this.time;\n    this.time = this.model.time.value;\n    this.duration = this.model.time.playing && (this.time - time_1 > 0) ? this.model.time.delayAnimations : 0;\n\n    const timeDim = this.model.time.getDimension();\n    const filter = {};\n\n    filter[timeDim] = this.time;\n\n    this.prev_steps = this.all_steps.filter(f => f < _this.time);\n\n    this.timeUpdatedOnce = true;\n  },\n\n  profiles: {\n    \"small\": {\n      margin: {\n        top: 30,\n        right: 20,\n        left: 40,\n        bottom: 20\n      },\n      infoElHeight: 16,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 60,\n      text_padding: 12,\n      lollipopRadius: 6,\n      limitMaxTickNumberX: 5\n    },\n    \"medium\": {\n      margin: {\n        top: 40,\n        right: 60,\n        left: 60,\n        bottom: 25\n      },\n      infoElHeight: 20,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 80,\n      text_padding: 15,\n      lollipopRadius: 7,\n      limitMaxTickNumberX: 10\n    },\n    \"large\": {\n      margin: {\n        top: 50,\n        right: 60,\n        left: 75,\n        bottom: 30\n      },\n      infoElHeight: 22,\n      yAxisTitleBottomMargin: 6,\n      tick_spacing: 100,\n      text_padding: 20,\n      lollipopRadius: 9,\n      limitMaxTickNumberX: 0 // unlimited\n    }\n  },\n  presentationProfileChanges: {\n    \"medium\": {\n      margin: { top: 70, bottom: 40, left: 70 },\n      yAxisTitleBottomMargin: 20,\n      xAxisTitleBottomMargin: 20,\n      infoElHeight: 26,\n      text_padding: 30\n    },\n    \"large\": {\n      margin: { top: 70, bottom: 50, left: 70 },\n      yAxisTitleBottomMargin: 20,\n      xAxisTitleBottomMargin: 20,\n      infoElHeight: 32,\n      text_padding: 36,\n      hideSTitle: true\n    }\n  },\n\n  timeSliderProfiles: {\n    small: {\n      margin: {\n        top: 7,\n        right: 15,\n        bottom: 10,\n        left: 60\n      }\n    },\n    medium: {\n      margin: {\n        top: 10,\n        right: 15,\n        bottom: 10,\n        left: 60\n      }\n    },\n    large: {\n      margin: {\n        top: 5,\n        right: 15,\n        bottom: 10,\n        left: 75\n      }\n    }\n  },\n\n  /*\n   * RESIZE:\n   * Executed whenever the container is resized\n   * Ideally, it contains only operations related to size\n   */\n  updateSize() {\n\n    const _this = this;\n    const values = this.values;\n    const KEY = this.KEY;\n    const isRTL = this.model.locale.isRTL();\n\n    const padding = 2;\n\n    this.activeProfile = this.getActiveProfile(this.profiles, this.presentationProfileChanges);\n    this.margin = this.activeProfile.margin;\n    this.tick_spacing = this.activeProfile.tick_spacing;\n\n    const infoElHeight = this.activeProfile.infoElHeight;\n\n    //adjust right this.margin according to biggest label\n\n    let longestLabelWidth = 0;\n\n    this.entityLabels.selectAll(\".vzb-lc-labelname\")\n      .attr(\"dx\", _this.activeProfile.text_padding)\n      .each(function(d, index) {\n        const width = this.getComputedTextLength();\n        if (width > longestLabelWidth) longestLabelWidth = width;\n      });\n\n    this.entityLabels.selectAll(\".vzb-lc-circle\")\n      .attr(\"r\", this.shadowWidth ? _this.activeProfile.lollipopRadius : _this.activeProfile.lollipopRadius * 0.8);\n\n    const magicMargin = 20;\n    this.margin.right = Math.max(this.margin.right, longestLabelWidth + this.activeProfile.text_padding + magicMargin);\n\n    //stage\n    this.height = (parseInt(this.element.style(\"height\"), 10) - this.margin.top - this.margin.bottom) || 0;\n    this.width = (parseInt(this.element.style(\"width\"), 10) - this.margin.left - this.margin.right) || 0;\n\n    if (this.height <= 0 || this.width <= 0) return utils.warn(\"Line chart updateSize() abort: vizabi container is too little or has display:none\");\n\n    this.linesContainerCrop\n      .attr(\"width\", this.width)\n      .attr(\"height\", Math.max(0, this.height));\n\n    this.labelsContainerCrop\n      .attr(\"width\", this.width + this.margin.right)\n      .attr(\"height\", Math.max(0, this.height));\n\n    this.collisionResolver.height(this.height);\n\n    this.graph\n      .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\n    this.yScale.range([this.height - this.activeProfile.lollipopRadius, this.activeProfile.lollipopRadius]);\n    this.xScale.range([this.rangeXShift, this.width * this.rangeXRatio + this.rangeXShift]);\n\n\n    this.yAxis.scale(this.yScale)\n      .tickSizeInner(-this.width)\n      .tickSizeOuter(0)\n      .tickPadding(6)\n      .tickSizeMinor(-this.width, 0)\n      .labelerOptions({\n        scaleType: this.model.marker.axis_y.scaleType,\n        toolMargin: this.margin,\n        limitMaxTickNumber: 6,\n        viewportLength: this.height,\n        formatter: this.model.marker.axis_y.getTickFormatter()\n      });\n\n    this.xAxis.scale(this.xScale)\n      .tickSizeInner(-this.height)\n      .tickSizeOuter(0)\n      .tickSizeMinor(-this.height, 0)\n      .tickPadding(6)\n      .labelerOptions({\n        scaleType: this.model.marker.axis_x.scaleType,\n        limitMaxTickNumber: this.activeProfile.limitMaxTickNumberX,\n        toolMargin: this.margin,\n        bump: this.activeProfile.text_padding * 2,\n        formatter: this.model.marker.axis_x.getTickFormatter()\n        //showOuter: true\n      });\n\n    this.xAxisElContainer\n      .attr(\"width\", this.width + this.activeProfile.text_padding * 2)\n      .attr(\"height\", this.activeProfile.margin.bottom + this.height)\n      .attr(\"y\", -1)\n      .attr(\"x\", -this.activeProfile.text_padding);\n\n    this.xAxisEl\n      .attr(\"transform\", \"translate(\" + (this.activeProfile.text_padding - 1) + \",\" + (this.height + 1) + \")\");\n\n    this.yAxisElContainer\n      .attr(\"width\", this.activeProfile.margin.left + this.width)\n      .attr(\"height\", Math.max(0, this.height))\n      .attr(\"x\", -this.activeProfile.margin.left);\n    this.yAxisEl\n      .attr(\"transform\", \"translate(\" + (this.activeProfile.margin.left - 1) + \",\" + 0 + \")\");\n\n    this.yAxisEl.call(this.yAxis);\n    this.xAxisEl.call(this.xAxis);\n\n    this.yTitleEl\n      .style(\"font-size\", infoElHeight + \"px\")\n      .attr(\"transform\", \"translate(\" + (10 - this.activeProfile.margin.left + (isRTL ? infoElHeight * 1.4 : 0 )) + \", -\" + this.activeProfile.yAxisTitleBottomMargin + \")\");\n\n    const yTitleText = this.yTitleEl.select(\"text\").text(this.strings.title.Y + this.strings.unit.Y);\n    if (yTitleText.node().getBBox().width > this.width) yTitleText.text(this.strings.title.Y);\n\n    if (this.yInfoEl.select(\"svg\").node()) {\n      const titleBBox = this.yTitleEl.node().getBBox();\n      const t = utils.transform(this.yTitleEl.node());\n\n      this.yInfoEl.select(\"svg\")\n        .attr(\"width\", infoElHeight + \"px\")\n        .attr(\"height\", infoElHeight + \"px\");\n      this.yInfoEl.attr(\"transform\", \"translate(\"\n        + (isRTL ? 10 - this.activeProfile.margin.left : titleBBox.x + t.translateX + titleBBox.width + infoElHeight * 0.4) + \",\"\n        + (t.translateY - infoElHeight * 0.8) + \")\");\n    }\n\n    const warnBB = this.dataWarningEl.select(\"text\").node().getBBox();\n    this.dataWarningEl.select(\"svg\")\n      .attr(\"width\", warnBB.height * 0.75)\n      .attr(\"height\", warnBB.height * 0.75)\n      .attr(\"x\", -warnBB.width - warnBB.height * 1.2)\n      .attr(\"y\", -warnBB.height * 0.65);\n\n    this.dataWarningEl\n      .attr(\"transform\", \"translate(\" + (this.width + this.margin.right * 0.85) +\n        \",-\" + this.activeProfile.yAxisTitleBottomMargin + \")\")\n      .select(\"text\");\n\n\n    const xTitleText = this.xTitleEl.select(\"text\").text(this.strings.title.X + this.strings.unit.X);\n\n    this.xTitleEl\n      .style(\"font-size\", infoElHeight + \"px\")\n      .attr(\"transform\", \"translate(\" +\n        (this.width + this.activeProfile.text_padding + this.activeProfile.yAxisTitleBottomMargin) + \",\" +\n        (this.height + xTitleText.node().getBBox().height  * 0.72) + \")\");\n\n    if (xTitleText.node().getBBox().width > this.width - 100) xTitleText.text(this.strings.title.X);\n\n    // adjust the vertical dashed line\n    this.verticalNow.attr(\"y1\", this.yScale.range()[0]).attr(\"y2\", this.yScale.range()[1])\n      .attr(\"x1\", 0).attr(\"x2\", 0);\n    this.projectionX.attr(\"y1\", _this.yScale.range()[0]);\n    this.projectionY.attr(\"x2\", _this.xScale.range()[0]);\n\n    if (utils.isTouchDevice()) {\n      _this.tooltip.classed(\"vzb-hidden\", true);\n      _this.verticalNow.style(\"opacity\", 1);\n      _this.projectionX.style(\"opacity\", 0);\n      _this.projectionY.style(\"opacity\", 0);\n      _this.xAxisEl.call(_this.xAxis.highlightValue(_this.time));\n      _this.yAxisEl.call(_this.yAxis.highlightValue(\"none\"));\n      _this.graph.selectAll(\".vzb-lc-entity\").each(function() {\n        d3.select(this).classed(\"vzb-dimmed\", false).classed(\"vzb-hovered\", false);\n      });\n\n      _this.hoveringNow = null;\n    }\n    const opts = {\n      rangeMax: this.xScale.range()[1],\n      mRight: longestLabelWidth - magicMargin,\n      profile: this.timeSliderProfiles[this.getLayoutProfile()]\n    };\n    this.parent.trigger(\"myEvent\", opts);\n\n    this.sizeUpdatedOnce = true;\n  },\n\n  /*\n   * REDRAW DATA POINTS:\n   * Here plotting happens\n   */\n  redrawDataPoints() {\n    const _this = this;\n    const KEYS = this.KEYS;\n    const KEY = this.KEY;\n    const dataKeys = this.dataKeys;\n//    var values = this.values;\n\n    if (!_this.all_values) return;\n    this.model.marker.getFrame(this.time, (values, time) => {\n\n      if (!_this._frameIsValid(values)) return;\n      _this.values = values;\n      if (!_this.timeUpdatedOnce) {\n        _this.updateTime();\n      }\n      if (!_this.sizeUpdatedOnce) {\n        _this.updateSize();\n      }\n      _this.updateDoubtOpacity();\n\n      _this.entityLines\n        .each(function(d, index) {\n          const entity = d3.select(this);\n\n          const {color, colorShadow} = _this.getColorsByValue(values.color[utils.getKey(d, dataKeys.color)]);\n          \n          //TODO: optimization is possible if getFrame would return both x and time\n          //TODO: optimization is possible if getFrame would return a limited number of points, say 1 point per screen pixel\n//          const startTime = new Date();\n\n          const xy = _this.prev_steps.map((frame, i) => [frame, _this.all_values[frame] ? _this.all_values[frame].axis_y[utils.getKey(d, dataKeys.axis_y)] : null])\n            .filter(d => d[1] || d[1] === 0);\n//          timer += new Date() - startTime;\n          // add last point\n          if (values.axis_y[utils.getKey(d, dataKeys.axis_y)]) {\n            xy.push([values.axis_x[utils.getKey(d, dataKeys.axis_x)], values.axis_y[utils.getKey(d, dataKeys.axis_y)]]);\n          }\n\n          if (xy.length > 0) {\n            _this.cached[d[KEY]] = {\n              valueX: xy[xy.length - 1][0],\n              valueY: xy[xy.length - 1][1]\n            };\n          } else {\n            delete _this.cached[d[KEY]];\n          }\n\n          // the following fixes the ugly line butts sticking out of the axis line\n          //if(x[0]!=null && x[1]!=null) xy.splice(1, 0, [(+x[0]*0.99+x[1]*0.01), y[0]]);\n          const path2 = entity.select(\".vzb-lc-line\");\n\n          if (_this.model.time.playing && _this.totalLength_1[d[KEY]] === null) {\n            _this.totalLength_1[d[KEY]] = path2.node().getTotalLength();\n          }\n          const line = _this.line(xy) || \"\";\n\n          const path1 = entity.select(\".vzb-lc-line-shadow\")\n\n            .style(\"stroke\", colorShadow)\n            .style(\"stroke-width\", _this.shadowWidth + \"px\")\n            .attr(\"transform\", \"translate(0, \" + (_this.shadowWidth - _this.lineWidth) + \")\")\n            .attr(\"d\", line);\n          path2\n          //.style(\"filter\", \"none\")\n            .style(\"stroke\", color)\n            .style(\"stroke-width\", _this.lineWidth + \"px\")\n            .attr(\"d\", line);\n          const totalLength = path2.node().getTotalLength();\n\n          // this section ensures the smooth transition while playing and not needed otherwise\n          if (_this.model.time.playing) {\n\n            path1\n              .interrupt()\n              .attr(\"stroke-dasharray\", totalLength)\n              .attr(\"stroke-dashoffset\", totalLength - _this.totalLength_1[d[KEY]])\n              .transition()\n              .delay(0)\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"stroke-dashoffset\", 0);\n            path2\n              .interrupt()\n              .attr(\"stroke-dasharray\", totalLength)\n              .attr(\"stroke-dashoffset\", totalLength - _this.totalLength_1[d[KEY]])\n              .transition()\n              .delay(0)\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"stroke-dashoffset\", 0);\n\n            _this.totalLength_1[d[KEY]] = totalLength;\n          } else {\n            //reset saved line lengths\n            _this.totalLength_1[d[KEY]] = null;\n\n            path1\n              .attr(\"stroke-dasharray\", \"none\")\n              .attr(\"stroke-dashoffset\", \"none\");\n\n            path2\n              .attr(\"stroke-dasharray\", \"none\")\n              .attr(\"stroke-dashoffset\", \"none\");\n          }\n\n        });\n\n      _this.entityLabels\n        .each(function(d, index) {\n          const entity = d3.select(this);\n          if (_this.cached[d[KEY]]) {\n            d.valueX = _this.xScale(_this.cached[d[KEY]][\"valueX\"]);\n            d.valueY = _this.yScale(_this.cached[d[KEY]][\"valueY\"]);\n            entity\n              .classed(\"vzb-hidden\", false)\n              .transition()\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"transform\", \"translate(\" + d.valueX + \",0)\");\n\n            entity.select(\".vzb-lc-circle\")\n              .transition()\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"cy\", d.valueY + 1);\n\n            if (_this.data.length < _this.ui.chart.labels.min_number_of_entities_when_values_hide * KEYS.length) {\n              const label = _this._getLabelText(_this.values, _this.labelNames, d);\n              const value = _this.yAxis.tickFormat()(_this.cached[d[KEY]][\"valueY\"]);\n              const name = label.length < 13 ? label : label.substring(0, 10) + \"...\";//\"…\";\n\n              entity.selectAll(\".vzb-lc-labelname\")\n                .text(name + \" \" + value);\n            }\n\n            entity.select(\".vzb-lc-label\")\n              .transition()\n              .duration(_this.duration)\n              .ease(d3.easeLinear)\n              .attr(\"transform\", \"translate(0,\" + d.valueY + \")\");\n\n          } else {\n            entity\n              .classed(\"vzb-hidden\", true);\n          }\n        });\n      _this.verticalNow\n        .transition()\n        .duration(_this.duration)\n        .ease(d3.easeLinear)\n        .attr(\"transform\", \"translate(\" + _this.xScale(d3.min([_this.model.marker.axis_x.getZoomedMax(), _this.time])) + \",0)\");\n\n\n      if (!_this.hoveringNow && _this.time - _this.model.time.start !== 0) {\n        if (!_this.ui.chart.hideXAxisValue) _this.xAxisEl.call(\n          _this.xAxis\n            .highlightTransDuration(_this.duration)\n            .highlightValue(_this.time)\n        );\n        _this.verticalNow.style(\"opacity\", 1);\n      } else {\n        _this.verticalNow.style(\"opacity\", 0);\n      }\n\n      // Call flush() after any zero-duration transitions to synchronously flush the timer queue\n      // and thus make transition instantaneous. See https://github.com/mbostock/d3/issues/1951\n      if (_this.duration == 0) {\n        d3.timerFlush();\n      }\n\n      // cancel previously queued simulation if we just ordered a new one\n      // then order a new collision resolving\n      clearTimeout(_this.collisionTimeout);\n      _this.collisionTimeout = setTimeout(() => {\n        _this.entityLabels.call(_this.collisionResolver.time(_this.xScale(_this.time)));\n      }, _this.model.time.delayAnimations * 1.5);\n\n    });\n  },\n\n  entityMousemove(me, index, context, closestToMouse) {\n    const _this = context;\n    const KEY = _this.KEY;\n    const values = _this.values;\n\n    const mouse = d3.mouse(_this.element.node()).map(d => parseInt(d));\n\n    let resolvedTime = _this.xScale.invert(mouse[0] - _this.margin.left);\n    if (_this.time - resolvedTime < 0) {\n      resolvedTime = _this.time;\n    } else if (resolvedTime < this.model.time[\"start\"]) {\n      resolvedTime = this.model.time[\"start\"];\n    }\n    let resolvedValue;\n\n    const mousePos = mouse[1] - _this.margin.top;\n\n    if (!utils.isDate(resolvedTime)) resolvedTime = this.model.time.parse(resolvedTime);\n\n    this.model.marker.getFrame(resolvedTime, data => {\n      if (!_this._frameIsValid(data)) return;\n      //const nearestKey = _this.getNearestKey(_this.yScale.invert(mousePos), data.axis_y);\n      const nearestKey = _this.getNearestKey(mousePos, data.axis_y, _this.yScale.bind(_this));\n      resolvedValue = data.axis_y[nearestKey];\n      me = _this.dataHash[nearestKey];\n      if (!_this.model.marker.isHighlighted(me)) {\n        _this.model.marker.clearHighlighted();\n        _this.model.marker.highlightMarker(me);\n      }\n      _this.hoveringNow = me;\n\n      if (utils.isNaN(resolvedValue)) return;\n\n      const scaledTime = _this.xScale(resolvedTime);\n      const scaledValue = _this.yScale(resolvedValue);\n\n      if (_this.ui.chart.whenHovering.showTooltip) {\n        //position tooltip\n        _this.tooltip\n        //.style(\"right\", (_this.width - scaledTime + _this.margin.right ) + \"px\")\n          .style(\"left\", (scaledTime + _this.margin.left) + \"px\")\n          .style(\"bottom\", (_this.height - scaledValue + _this.margin.bottom) + \"px\")\n          .text(_this.yAxis.tickFormat()(resolvedValue))\n          .classed(\"vzb-hidden\", false);\n      }\n\n      // bring the projection lines to the hovering point\n      if (_this.ui.chart.whenHovering.hideVerticalNow) {\n        _this.verticalNow.style(\"opacity\", 0);\n      }\n\n      if (_this.ui.chart.whenHovering.showProjectionLineX) {\n        _this.projectionX\n          .style(\"opacity\", 1)\n          .attr(\"y2\", scaledValue)\n          .attr(\"x1\", scaledTime)\n          .attr(\"x2\", scaledTime);\n      }\n      if (_this.ui.chart.whenHovering.showProjectionLineY) {\n        _this.projectionY\n          .style(\"opacity\", 1)\n          .attr(\"y1\", scaledValue)\n          .attr(\"y2\", scaledValue)\n          .attr(\"x1\", scaledTime);\n      }\n\n      if (_this.ui.chart.whenHovering.higlightValueX) _this.xAxisEl.call(\n        _this.xAxis.highlightValue(resolvedTime).highlightTransDuration(0)\n      );\n\n      if (_this.ui.chart.whenHovering.higlightValueY) _this.yAxisEl.call(\n        _this.yAxis.highlightValue(resolvedValue).highlightTransDuration(0)\n      );\n\n      clearTimeout(_this.unhoverTimeout);\n\n    });\n  },\n\n  entityMouseout(me, index, context) {\n    const _this = context;\n    if (d3.event.relatedTarget && d3.select(d3.event.relatedTarget).classed(\"vzb-tooltip\")) return;\n\n    // hide and show things like it was before hovering\n    _this.unhoverTimeout = setTimeout(() => {\n      _this.tooltip.classed(\"vzb-hidden\", true);\n      _this.verticalNow.style(\"opacity\", 1);\n      _this.projectionX.style(\"opacity\", 0);\n      _this.projectionY.style(\"opacity\", 0);\n      _this.xAxisEl.call(_this.xAxis.highlightValue(_this.time));\n      _this.yAxisEl.call(_this.yAxis.highlightValue(\"none\"));\n\n      _this.model.marker.clearHighlighted();\n\n      _this.hoveringNow = null;\n    }, 300);\n\n  },\n\n  /*\n   * Highlights all hovered lines\n   */\n  highlightLines() {\n    const _this = this;\n    const KEYS = this.KEYS;\n    const KEY = this.KEY;\n    const OPACITY_HIGHLT = 1.0;\n    const OPACITY_HIGHLT_DIM = 0.3;\n    const OPACITY_SELECT = 1.0;\n    const OPACITY_REGULAR = this.model.marker.opacityRegular;\n    const OPACITY_SELECT_DIM = this.model.marker.opacitySelectDim;\n\n    const someHighlighted = (this.model.marker.highlight.length > 0);\n    this.someSelected = (this.model.marker.select.length > 0);\n\n    // when pointer events need update...\n\n    this.nonSelectedOpacityZero = _this.model.marker.opacitySelectDim < 0.01;\n    const selected = {};\n    _this.model.marker.getSelected().map(d => {\n        selected[utils.getKey(d, KEYS)] = true;\n      }\n    );\n//    const startTime = new Date();\n    this.entityLines.style(\"opacity\", (d) => {\n      if (_this.model.marker.isHighlighted(d)) return OPACITY_HIGHLT;\n      if (_this.someSelected) {\n        return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n      }\n      if (someHighlighted) return OPACITY_HIGHLT_DIM;\n      return OPACITY_REGULAR;\n    });\n    this.entityLabels.style(\"opacity\", (d) => {\n      if (_this.model.marker.isHighlighted(d)) {\n        d.sortValue = 1;\n        return OPACITY_HIGHLT;\n      } else {\n        d.sortValue = 0;\n      }\n      if (_this.someSelected) {\n        return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n      }\n      if (someHighlighted) return OPACITY_HIGHLT_DIM;\n      return OPACITY_REGULAR;\n    }).attr(\"pointer-events\", d => {\n      if(!_this.someSelected || !_this.nonSelectedOpacityZero || selected[d[KEY]]) {\n        d.hidden = false;\n        return \"visible\";   \n      } else {\n        d.hidden = true;\n        return \"none\";\n      }\n    })\n    .sort(function(x, y){\n      return d3.ascending(x.sortValue, y.sortValue);\n    });\n/*\n//    const startTime = new Date();\n//    console.log(new Date() - startTime);\n    this.graph.selectAll(\".vzb-lc-entity\").each(function() {\n      d3.select(this)\n        .style(\"opacity\", d => {\n          if (_this.model.marker.isHighlighted(d)) return OPACITY_HIGHLT;\n          if (_this.someSelected) {\n            return selected[d[KEY]] ? OPACITY_SELECT : OPACITY_SELECT_DIM;\n          }\n          if (someHighlighted) return OPACITY_HIGHLT_DIM;\n          return OPACITY_REGULAR;\n        })\n    });\n*/\n\n  },\n\n  zoomToMaxMin() { \n    if (\n      this.model.marker.axis_x.getZoomedMin() != null &&\n      this.model.marker.axis_x.getZoomedMax() != null) {\n      this.xScale.domain([this.model.marker.axis_x.getZoomedMin(), this.model.marker.axis_x.getZoomedMax()]);\n      this.xAxisEl.call(this.xAxis);\n    }\n\n    if (\n      this.model.marker.axis_y.getZoomedMin() != null &&\n      this.model.marker.axis_y.getZoomedMax() != null) {\n      if ((this.model.marker.axis_y.getZoomedMin() <= 0 || this.model.marker.axis_y.getZoomedMax() <= 0)\n        && this.model.marker.axis_y.scaleType == \"log\") {\n        this.yScale = d3.scaleGenericlog()\n          .domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()])\n          .range(this.yScale.range());\n        this.model.marker.axis_y.scale = d3.scaleGenericlog()\n          .domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()])\n          .range(this.yScale.range());\n        this.yScale = this.model.marker.axis_y.scale;\n      } else {\n        this.yScale.domain([this.model.marker.axis_y.getZoomedMin(), this.model.marker.axis_y.getZoomedMax()]);\n      }\n      this.yAxisEl.call(this.yAxis);\n    }\n  },\n\n\n  /**\n   * Returns key from obj which value has the smallest difference with val\n   */\n  getNearestKey(val, obj, fn) {\n    //const startTime = new Date();\n    const KEYS = this.KEYS;\n    let keys = Object.keys(obj);\n\n    if (this.someSelected && this.nonSelectedOpacityZero) {\n      keys = this.model.marker.select.map(keyObj => {\n        return utils.getKey(keyObj, KEYS);\n      });\n    }\n    let resKey = keys[0];\n    for (let i = 1; i < keys.length; i++) {\n      let key = keys[i];\n      \n      if (Math.abs((fn ? fn(obj[key]) : obj[key]) - val) < Math.abs((fn ? fn(obj[resKey]) : obj[resKey]) - val)) {\n        resKey = key;\n      }\n    }\n    //console.log(new Date() - startTime);\n    return resKey;\n  },\n\n  _getLabelText(values, labelNames, d) {\n    return this.KEYS.map(key => values[labelNames[key]] ? values[labelNames[key]][d[key]] : d[key]).join(\", \");\n  }\n});\n\nexport default LCComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/component.js","module.exports = \"<!-- LineChart Component -->\\n<div class=\\\"vzb-linechart\\\">\\n    <svg class=\\\"vzb-linechart-svg\\\">\\n        <g class=\\\"vzb-lc-graph\\\">\\n\\n            <svg class=\\\"vzb-lc-axis-x\\\"><g></g></svg>\\n            <svg class=\\\"vzb-lc-axis-y\\\"><g></g></svg>\\n            <text class=\\\"vzb-lc-axis-x-value\\\"></text>\\n            <text class=\\\"vzb-lc-axis-y-value\\\"></text>\\n            <svg class=\\\"vzb-lc-lines-crop\\\">\\n                <svg class=\\\"vzb-lc-lines\\\"></svg>\\n                <line class=\\\"vzb-lc-projection-x\\\"></line>\\n                <line class=\\\"vzb-lc-projection-y\\\"></line>\\n            </svg>\\n            <svg class=\\\"vzb-lc-labels-crop\\\">\\n                <g class=\\\"vzb-lc-labels\\\">\\n                    <line class=\\\"vzb-lc-vertical-now\\\"></line>\\n                </g>\\n            </svg>\\n\\n            <g class=\\\"vzb-lc-axis-y-title\\\"></g>\\n            <g class=\\\"vzb-lc-axis-x-title\\\"></g>\\n            <g class=\\\"vzb-lc-axis-y-info\\\"></g>\\n\\n            <g class=\\\"vzb-data-warning vzb-noexport\\\">\\n                <svg></svg>\\n                <text></text>\\n            </g>\\n\\n\\n            <!--filter id=\\\"vzb-lc-filter-dropshadow\\\"> \\n              <feOffset result=\\\"offOut\\\" in=\\\"SourceGraphic\\\" dx=\\\"0\\\" dy=\\\"2\\\" />\\n              <feColorMatrix result = \\\"matrixOut\\\" in = \\\"offOut\\\" type = \\\"matrix\\\"\\n                             values = \\\"0.3 .0 .0 .0 .0\\n                                       .0 .3 .0 .0 .0\\n                                       .0 .0 .3 .0 .0\\n                                       1.0 1.0 1.0 1.0 .0\\\"/>\\n              <feGaussianBlur result=\\\"blurOut\\\" in=\\\"matrixOut\\\" stdDeviation=\\\"0.8\\\" />\\n              <feBlend in=\\\"SourceGraphic\\\" in2=\\\"blurOut\\\" mode=\\\"normal\\\" />\\n            </filter-->\\n\\n        </g>\\n    </svg>\\n    <div class=\\\"vzb-tooltip vzb-hidden\\\"></div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/template.html\n// module id = 3\n// module chunks = 0 1"],"sourceRoot":""}